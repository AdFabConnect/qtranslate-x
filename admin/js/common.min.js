function qtranxj_get_cookie(n){for(var t=document.cookie.split(";"),e=0;e<t.length;++e){var a=t[e],r=a.split("=");if(r[0].trim()==n&&!(t.length<2))return r[1].trim()}return""}function qtranxj_isArray(n){return n.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(n,t,e,a){var r=document.createElement(n);if(t)for(prop in t)r[prop]=t[prop];return e&&(a&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)),r}function qtranxj_LanguageSwitch(n,t){function e(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(i!==n.lang){i&&o[i].classList.remove("active"),i=n.lang,n.classList.add("active");for(var t=0;t<l.length;++t)l[t].call(this)}}for(var a=qTranslateConfig.enabled_languages,r=qTranslateConfig.language_name,i=t,o={},l=[],s=0;s<a.length;++s){var g=qTranslateConfig.flag_location,u=a[s],d=qtranxj_ce("li",{lang:u,className:"qtranxs-lang-switch",onclick:e},n);qtranxj_ce("img",{src:g+qTranslateConfig.flag[u]},d),qtranxj_ce("span",{innerHTML:r[u]},d),o[u]=d,i==u&&d.classList.add("active")}this.getActiveLanguage=function(){return i},this.onSwitch=function(n){"function"==typeof n&&l.push(n)}}qtranxj_split=function(n,t){for(var e=new Object,a=0;a<qTranslateConfig.enabled_languages.length;++a){var r=qTranslateConfig.enabled_languages[a];e[r]=""}var i=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\])/gi,o=n.xsplit(i);if(!qtranxj_isArray(o))return e;if(1==o.length){for(var l=o[0],s=0;s<qTranslateConfig.enabled_languages.length;++s){var r=qTranslateConfig.enabled_languages[s];e[r]+=l}return e}var g=/<!--:([a-z]{2})-->/gi,u=/<!--:-->/g,d=/\[:([a-z]{2})\]/gi;r=!1;for(var a=0;a<o.length;++a){var l=o[a];if(l.length)if(matches=g.exec(l),g.lastIndex=0,null==matches)if(matches=u.exec(l),u.lastIndex=0,null==matches)if(matches=d.exec(l),d.lastIndex=0,null==matches){if(r)e[r]+=l,r=!1;else if(t)for(var c in e)e[c]+=l}else r=matches[1];else r=!1;else r=matches[1]}return e},qtranxj_allthesame=function(n){if(0==qTranslateConfig.enabled_languages.length)return"";for(var t="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],r=n[a];if(r&&""!=r){t=r;break}}if(""==t)return t;for(var e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],r=n[a];if(r!=t)return null}return t},qtranxj_join_c=function(n){var t=qtranxj_allthesame(n);if(null!=t)return t;t="";for(var e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],r=n[a];r&&""!=r&&(t+="<!--:"+a+"-->",t+=r,t+="<!--:-->")}return t},qtranxj_join_b=function(n){var t=qtranxj_allthesame(n);if(null!=t)return t;for(var t="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],r=n[a];r&&""!=r&&(t+="[:"+a+"]",t+=r)}return t},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var t,e=0,a=[];null!=(t=n.exec(this));)a.push(this.slice(e,t.index)),t.length>1&&a.push(t[1]),e=n.lastIndex;return e<this.length&&a.push(this.slice(e)),e==this.length&&a.push(""),a};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},isLanguageEnabled=function(n){for(var t=0;t<qTranslateConfig.enabled_languages.length;++t)if(qTranslateConfig.enabled_languages[t]==n)return!0;return!1};var t=qtranxj_get_cookie("wp_qtrans_edit_language");t&&isLanguageEnabled(t)||(t=qTranslateConfig.language),this.getInitialLanguage=function(){return t};var e=[],a={};updateFusedValueHooked=function(n){n.mlContentField.value="<"===n.separator?qtranxj_join_c(n.contents):qtranxj_join_b(n.contents)},updateFusedValueH=function(n,t){var e=a[n],r=t.trim();e.contents[e.lang]=r,updateFusedValueHooked(e)},addContentHook=function(n,e,r){if(!n)return!1;if(a[n.id])return!0;var i=a[n.id]={};i.contentField=n,i.contents=qtranxj_split(n.value,!1),i.mlContentField=qtranxj_ce("input",{name:n.name,type:"hidden",className:"hidden",value:n.value},e,!0),r||(r="TEXTAREA"===n.tagName?"<":"["),i.separator=r,n.name="edit-"+n.name,i.lang=t;var o=i.contents[i.lang];if(n.value=o,n.onblur=function(){updateFusedValueH(this.id,this.value)},window.tinyMCE)for(var l=0;l<tinyMCE.editors.length;++l){var s=tinyMCE.editors[l];s.id==n.id&&(i.mce=s,updateTinyMCE(s,o))}return i},this.addContentHookC=function(n,t){return addContentHook(n,t,"<")},this.addContentHookB=function(n,t){return addContentHook(n,t,"[")},this.addContentHookById=function(n,t,e){return addContentHook(this.ge(n),t,e)},this.addContentHookByIdName=function(n,t){var e;return(0==n.indexOf("<")||0==n.indexOf("["))&&(e=n.substring(0,1),n=n.substring(1)),this.addContentHookById(n,t,e)},this.addContentHookByIdC=function(n,t){return this.addContentHookById(n,t,"<")},this.addContentHookByIdB=function(n,t){return this.addContentHookById(n,t,"[")},addDisplayHook=function(n){if(!n)return!1;var a={};a.elem=n;var r=n.innerHTML.replace(/&lt;!--:([a-z]{2}|)--&gt;/gi,"<!--:$1-->");return a.contents=qtranxj_split(r,!0),n.innerHTML=a.contents[t],e.push(a),!0},setLangCookie=function(n){document.cookie="wp_qtrans_edit_language="+n},updateTinyMCE=function(n,t){window.switchEditors&&(t=window.switchEditors.wpautop(t)),n.setContent(t,{format:"html"})},onTabSwitch=function(){setLangCookie(this.lang);for(var n=0;n<e.length;++n){var t=e[n];t.elem.innerHTML=t.contents[this.lang]}for(var r in a){var t=a[r],i=t.mce&&!t.mce.hidden;i&&(t.mce.save({format:"html"}),t.contents[t.lang]=t.contentField.value),t.lang=this.lang,t.contentField.value=t.contents[this.lang],i&&updateTinyMCE(t.mce,t.contentField.value)}};var r=this;if(onTabSwitchCustom=function(){n.onTabSwitch(this.lang,r)},this.addDisplayHooksByClass=function(n,t){for(var e=t.getElementsByClassName(n),a=0;a<e.length;++a){var r=e[a];addDisplayHook(r)}},this.addContentHooksByClass=function(n,t){var e;(0==n.indexOf("<")||0==n.indexOf("["))&&(e=n.substring(0,1),n=n.substring(1));for(var a=t.getElementsByClassName(n),r=0;r<a.length;++r){var i=a[r];addContentHook(i,t,e)}},this.addContentHooks=function(n){for(var t=0;t<qTranslateConfig.custom_fields.length;++t){var e=qTranslateConfig.custom_fields[t];this.addContentHookByIdName(e,n)}for(var t=0;t<qTranslateConfig.custom_field_classes.length;++t){var e=qTranslateConfig.custom_field_classes[t];this.addContentHooksByClass(e,n)}},this.addContentHooksTinyMCE=function(){function n(n){var t=n.id;if(t){var e=a[t];e&&(e.mce||(e.mce=n,n.getBody().addEventListener("blur",function(){var t=a[n.id];n.save(),t.contents[t.lang]=t.contentField.value,updateFusedValueHooked(t)}),updateTinyMCE(n,e.contentField.value)))}}window.addEventListener("load",function(){if(window.tinyMCE){for(var t=0;t<tinyMCE.editors.length;++t){var e=tinyMCE.editors[t];n(e)}for(var r in a){var i=a[r];i.mce||"TEXTAREA"===i.contentField.tagName&&(tinyMCEPreInit.mceInit[r].init_instance_callback=function(t){n(t)})}}})},this.getWrapForm=function(){for(var n=document.getElementsByClassName("wrap"),t=0;t<n.length;++t){var e=n[t],a=e.getElementsByTagName("form");if(a.length)return a[0]}for(var a=document.getElementsByTagName("form"),t=0;t<a.length;++t){var r=a[t];if(n=r.getElementsByClassName("wrap"),n.length)return r}return null},this.getFormWrap=function(){for(var n=document.getElementsByTagName("form"),t=0;t<n.length;++t){var e=n[t],a=e.getElementsByClassName("wrap");if(a.length)return a[0]}for(var a=document.getElementsByClassName("wrap"),t=0;t<a.length;++t){var r=a[t];if(n=r.getElementsByTagName("form"),n.length)return r}return null},n.addContentHooks(this)){var i=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"}),o=n.langSwitchWrapAnchor;o||(o=this.getWrapForm()),o.parentNode.insertBefore(i,o),languageSwitch=new qtranxj_LanguageSwitch(i,t),languageSwitch.onSwitch(onTabSwitch),n.onTabSwitch&&languageSwitch.onSwitch(onTabSwitchCustom)}};