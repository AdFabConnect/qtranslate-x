function qtranxj_get_cookie(e){for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var t=a[n],i=t.split("=");if(i[0].trim()==e&&!(a.length<2))return i[1].trim()}return""}function qtranxj_isArray(e){return e.constructor.toString().indexOf("Array")>=0}function ce(e,a,n,t){var i=document.createElement(e);if(a)for(prop in a)i[prop]=a[prop];return n&&(t&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}function ge(e){return document.getElementById(e)}function LanguageSwitch(e,a){function n(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(l!==e.lang){l&&r[l].classList.remove("active"),l=e.lang,e.classList.add("active");for(var a=0;a<g.length;a++)g[a].call(this)}}var t=qTranslateConfig.enabled_languages,i=qTranslateConfig.language_name,l=a,r={},g=[];location.pathname.indexOf();for(var s=0;s<t.length;s++){var o=qTranslateConfig.WP_CONTENT_URL+qTranslateConfig.flag_location,u=t[s],c=ce("li",{lang:u,className:"qtranxs-lang-switch",onclick:n},e);ce("img",{src:o+qTranslateConfig.flag[u]},c),ce("span",{innerHTML:i[u]},c),r[u]=c,l==u&&c.classList.add("active")}this.getActiveLanguage=function(){return l},this.onSwitch=function(e){"function"==typeof e&&g.push(e)}}qtranxj_split_c=function(e){for(var a=/(<!--.*?-->)/gi,n=/<!--:([a-z]{2})-->/gi,t=/<!--:-->/gi,i=/(<!--more-->|<!--nextpage-->)+$/gi,l=null,r=new Object,g=!1,s=0;s<qTranslateConfig.enabled_languages.length;s++){var o=qTranslateConfig.enabled_languages[s];r[o]=""}var u=e.xsplit(a);if(qtranxj_isArray(u))for(var s=0;s<u.length;s++)if(null!=(l=n.exec(u[s])))g=l[1];else if(t.test(u[s]))g=!1;else if(g)r[g]+=u[s];else for(var c=0;c<qTranslateConfig.enabled_languages.length;c++){var o=qTranslateConfig.enabled_languages[c];r[o]+=u[s]}for(var s=0;s<r.length;s++)r[s]=r[s].replace(i,"");return r},qtranxj_join_c=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],i=e[t];i&&""!=i&&(a+="<!--:"+t+"-->",a+=i,a+="<!--:-->")}return a},qtranxj_split_b=function(e){for(var a=/(\[:[a-z]{2}\])/gi,n=/\[:([a-z]{2})\]/gi,t=null,i=new Object,l=!1,r=0;r<qTranslateConfig.enabled_languages.length;r++){var g=qTranslateConfig.enabled_languages[r];i[g]=""}var s=e.xsplit(a);if(qtranxj_isArray(s))for(var r=0;r<s.length;r++){var o=s[r];if(null!=(t=n.exec(o)))l=t[1];else if(l)i[l]+=o,l=!1;else for(var u=0;u<qTranslateConfig.enabled_languages.length;u++){var g=qTranslateConfig.enabled_languages[u];i[g]+=o}}return i},qtranxj_join_b=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],i=e[t];i&&""!=i&&(a+="[:"+t+"]",a+=i)}return a},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var a,n=0,t=[];null!=(a=e.exec(this));)t.push(this.slice(n,a.index)),a.length>1&&t.push(a[1]),n=e.lastIndex;return n<this.length&&t.push(this.slice(n)),n==this.length&&t.push(""),t};var qTranslateX=function(){function e(e,a,n,t){var i=/(<!--more-->|<!--nextpage-->)+$/gi;n[t]=a.replace(i,""),e.value=qtranxj_join_c(n)}function a(e,a,n,t){n[t]=a,e.value=qtranxj_join_b(n)}function n(){var e,a,n=!!ge("tag-name");n?(e="tag-",a="addtag"):(e="",a="edittag");var t=ge(e+"name"),l=ge(a);if(!l||!t)return!1;var r=qtranxj_get_cookie("qtrans_admin_language");r||(r=qTranslateConfig.default_language),build_translator=function(e,a){var n={};for(var t in qTranslateConfig.term_name){var i=qTranslateConfig.term_name[t],l=i[e],r=i[a];if(!l||!r){var g=i[qTranslateConfig.default_language];if(!g)continue;l||(l=g+"("+qTranslateConfig.default_language+")"),r||(r=g+"("+qTranslateConfig.default_language+")")}n[l]=r}return n};var g=ge("the-list");hideQuickEdit=function(){if(g)for(var e=g.getElementsByTagName("TR"),a=0;a<e.length;a++)for(var n=e[a],t=n.getElementsByTagName("TD")[0],i=t.getElementsByClassName("inline"),l=0;l<i.length;l++){var r=i[l];r.style.display="none"}},hideQuickEdit(),updateNames=function(e,a){if(g)for(var n=g.getElementsByTagName("TR"),t=0;t<n.length;t++){for(var i,l=n[t],s=l.getElementsByTagName("TD")[0],o=s.getElementsByTagName("DIV"),u=0;u<o.length;u++){var c=o[u];if("name"===c.className){i=c.innerHTML;break}}if(r!=qTranslateConfig.default_language){var f=build_translator(r,qTranslateConfig.default_language);i=f[i]}for(var v=qTranslateConfig.term_name[i]||{},d=v[e]||"",h=v[a]||"",m=s.getElementsByClassName("row-title"),_=0;_<m.length;_++){var c=m[_];d?c.innerHTML=c.innerHTML.replace(d,h):c.innerHTML+=h}}};var s=document.getElementsByClassName("tagcloud")[0];updateTagCloud=function(e,a){if(s){var n=s.getElementsByTagName("A");if(n.length)for(var t=build_translator(e,a),i=0;i<n.length;i++){var l=n[i],r=l.innerHTML,g=t[r];g&&(l.innerHTML=g)}}},updateNamesAndTagCloud=function(e,a){updateNames(e,a),updateTagCloud(e,a)},r!==i&&updateNamesAndTagCloud(r,i);var o=ce("input",{name:t.name,className:"hidden",value:t.value},l,!0);t.name="";var u=qTranslateConfig.term_name[t.value]||{};i!==qTranslateConfig.default_language&&(t.value=u[i]||""),editinline_activated=function(){return!0};for(var c=document.getElementsByClassName("editinline"),f=0;f<c.length;f++){var v=c[f];"A"===v.tagName&&v.addEventListener("click",editinline_activated)}onTabSwitch=function(){i!==this.lang&&(t.value=u[this.lang]||"",updateNamesAndTagCloud(i,this.lang),i=this.lang)};for(var d=qTranslateConfig.enabled_languages,h={},f=0;f<d.length;f++){var m=d[f];h[m]=ce("input",{name:"qtranx_term_"+m,className:"hidden",value:name[m]||""},l,!0)}return t.onblur=function(){var e=languageSwitch.getActiveLanguage();h[e].value=this.value,u[e]=this.value,e===qTranslateConfig.default_language&&(o.value=this.value)},!0}function t(){function n(e){var a=ge("view-post-btn");if(a&&a.children.length){var n=a.children[0];n.urlWasGet||(p=ce("a",{href:n.href}),n.urlWasGet=!0);var t=ce("a",{href:p.href});switch(qTranslateConfig.url_mode.toString()){case"1":var i=t.host;t.search?t.search+="&lang="+e:t.search="?lang="+e;break;case"2":var i=t.host+"/"+e;t.pathname="/"+e+t.pathname;break;case"3":var i=e+"."+t.host;t.host=i}i=t.protocol+"//"+i+"/";var l=ge("sample-permalink"),r=ge("editable-post-name");l&&l.childNodes.length&&(l.childNodes[0].nodeValue=r?i:t.href),a&&a.children.length&&(a.children[0].href=t.href);var g=ge("preview-action");g&&g.children.length&&(g.children[0].href=t.href)}}function t(a){console.assert(a);var n=a.id;n&&(T[n]||(T[n]=!0,a.getBody().addEventListener("blur",function(){e(u,tinyMCE.activeEditor.getContent(),o,languageSwitch.getActiveLanguage())})))}var l,r,g=ge("post"),s=ge("title");if(!s)return!1;l=qtranxj_split_c(s.value),r=ce(s.tagName,{name:s.name,className:"hidden",value:s.value},g,!0),s.name+="_edit",s.value=l[i],s.onblur=function(){e(r,this.value,l,languageSwitch.getActiveLanguage())};var o,u,c=ge("content");c||(c=ge("attachment_content")),c&&(o=qtranxj_split_c(c.value),u=ce(c.tagName,{name:c.name,className:"hidden",value:c.value},g,!0),c.name+="_edit",c.value=o[i],c.onblur=function(){e(u,this.value,o,languageSwitch.getActiveLanguage())});var f,v,d=ge("attachment_caption");d&&(f=qtranxj_split_c(d.value),v=ce(d.tagName,{name:d.name,className:"hidden",value:d.value},g,!0),d.name+="_edit",d.value=f[i],d.onblur=function(){e(v,this.value,f,languageSwitch.getActiveLanguage())});var h,m,_=ge("attachment_alt");_&&(h=qtranxj_split_b(_.value),m=ce(_.tagName,{name:_.name,className:"hidden",value:_.value},g,!0),_.name+="_edit",_.value=h[i],_.onblur=function(){a(m,this.value,h,languageSwitch.getActiveLanguage())});var p;onTabSwitch=function(){s.value=l[this.lang],c.value=o[this.lang],d&&(d.value=f[this.lang]),_&&(_.value=h[this.lang]),n(this.lang),window.tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.setContent(c.value)};var T={};return window.addEventListener("load",function(){window.tinyMCE&&(tinyMCE.autosave_ask_before_unload=!1,tinyMCE.activeEditor&&t(tinyMCE.activeEditor),tinyMCEPreInit.mceInit.content.init_instance_callback=function(e){t(e)})}),!0}var i=qtranxj_get_cookie("qtrans_edit_language");i||(i=qTranslateConfig.default_language),setLangCookie=function(){document.cookie="qtrans_edit_language="+this.lang};var l=location.pathname.match(/(\/wp-admin\/([^\/]*))$/);switch(l&&l[1]){case"/wp-admin/post.php":case"/wp-admin/post-new.php":if(!t())return;break;case"/wp-admin/edit-tags.php":if(!n())return;break;default:return}var r=ce("ul",{className:"qtranxs-lang-switch-wrap"}),g=document.getElementsByClassName("wrap")[0],s=g.getElementsByTagName("form")[0];s.parentNode.insertBefore(r,s),languageSwitch=new LanguageSwitch(r,i),languageSwitch.onSwitch(onTabSwitch),languageSwitch.onSwitch(setLangCookie)};new qTranslateX;
