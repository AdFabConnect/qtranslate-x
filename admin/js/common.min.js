function qtranxj_get_cookie(e){for(var n=document.cookie.split(";"),a=0;a<n.length;++a){var t=n[a],i=t.split("=");if(i[0].trim()==e&&!(n.length<2))return i[1].trim()}return""}function qtranxj_ce(e,n,a,t){var i=document.createElement(e);if(n)for(prop in n)i[prop]=n[prop];return a&&(t&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)),i}qtranxj_get_split_blocks=function(e){var n=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return e.xsplit(n)},qtranxj_split=function(e){var n=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(n)},qtranxj_split_blocks=function(e){var n=new Object;for(var a in qTranslateConfig.language_config)n[a]="";if(!e||!e.length)return n;if(1==e.length){var t=e[0];for(var a in qTranslateConfig.language_config)n[a]+=t;return n}for(var i,r=/<!--:([a-z]{2})-->/gi,o=/\[:([a-z]{2})\]/gi,a=!1,s=0;s<e.length;++s){var t=e[s];if(t.length)if(i=r.exec(t),r.lastIndex=0,null==i)if(i=o.exec(t),o.lastIndex=0,null==i)if("<!--:-->"!=t&&"[:]"!=t)if(a)n[a]+=t,a=!1;else for(var l in n)n[l]+=t;else a=!1;else a=i[1];else a=i[1]}return n},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var n,a=0,t=[];null!=(n=e.exec(this));)t.push(this.slice(a,n.index)),n.length>1&&t.push(n[1]),a=e.lastIndex;return a<this.length&&t.push(this.slice(a)),a==this.length&&t.push(""),t};var qTranslateX=function(e){var n=this;qTranslateConfig.qtx=this,this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(e){return!!qTranslateConfig.language_config[e]};var a=function(e){document.cookie="qtrans_edit_language="+e};qTranslateConfig.activeLanguage,qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?a(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,a(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage},this.getLanguages=function(){return qTranslateConfig.language_config};var t={};this.addContentHook=function(e,a){if(!e)return!1;if(!e.name)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":if("text"!=e.type)return!1;break;default:return!1}if(e.id){if(t[e.id]){if(jQuery.contains(document,e))return t[e.id];n.removeContentHook(e)}}else jQuery(e).uniqueId();var i=t[e.id]={};i.name=e.name,i.contentField=e,i.lang=qTranslateConfig.activeLanguage;var r=qtranxj_split(e.value);e.value=r[i.lang];var o,s,l=i.name.indexOf("[");if(0>l)o="qtranslate-fields["+i.name+"]";else if(o="qtranslate-fields["+i.name.substring(0,l)+"]",i.name.lastIndexOf("[]")<0)o+=i.name.substring(l);else{var g=i.name.length-2;g>l&&(o+=i.name.substring(l,g)),s="[]"}i.fields={};for(var f in r){var c=r[f],u=o+"["+f+"]";s&&(u+=s);var d=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:c});i.fields[f]=d,e.parentNode.insertBefore(d,e)}return a||(a="["),i.sepfield=qtranxj_ce("input",{name:o+"[qtranslate-separator]",type:"hidden",className:"hidden",value:a}),e.parentNode.insertBefore(i.sepfield,e),i.separator=a,e.className+=" qtranxs-translatable",i},this.addContentHookC=function(e){return n.addContentHook(e,"[")},this.addContentHookB=function(e){return n.addContentHook(e,"[")},this.addContentHookById=function(e,a){return n.addContentHook(document.getElementById(e),a)},this.addContentHookByIdName=function(e){var a;switch(e[0]){case"<":case"[":a=e.substring(0,1),e=e.substring(1)}return n.addContentHookById(e,a)},this.addContentHookByIdC=function(e){return n.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return n.addContentHookById(e,"[")},this.addContentHooks=function(e,a){for(var t=0;t<e.length;++t){var i=e[t];n.addContentHook(i,a)}};var i=function(e,a,t){a||(a=document);var i=a.getElementsByClassName(e);n.addContentHooks(i,t)};this.addContentHooksByClass=function(e,n){var a;(0==e.indexOf("<")||0==e.indexOf("["))&&(a=e.substring(0,1),e=e.substring(1)),i(e,n,a)},this.addContentHooksByTagInClass=function(e,a,t){for(var i=t.getElementsByClassName(e),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(a);n.addContentHooks(s)}};var r=function(e){if(!e)return!1;e.sepfield&&jQuery(e.sepfield).remove();for(var n in e.fields)jQuery(e.fields[n]).remove();return delete t[e.contentField.id],!0};this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!t[e.id])return!1;var n=t[e.id];return r(n),jQuery(e).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e)return!1;if(!e.id)return!1;var a=t[e.id];return a&&r(a),n.addContentHook(e)};var o=[],s=function(e){if(!e.nodeValue)return 0;var n=qtranxj_get_split_blocks(e.nodeValue);if(!n||!n.length||1==n.length)return 0;var a={};return a.nd=e,a.contents=qtranxj_split_blocks(n),e.nodeValue=a.contents[qTranslateConfig.activeLanguage],o.push(a),1},l=[],g=function(e){if(!e.value)return 0;var n=qtranxj_get_split_blocks(e.value);if(!n||!n.length||1==n.length)return 0;var a={};return a.nd=e,a.contents=qtranxj_split_blocks(n),e.value=a.contents[qTranslateConfig.activeLanguage],l.push(a),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return g(e);default:return 0}}var a=0;if(e.childNodes&&e.childNodes.length)for(var t=0;t<e.childNodes.length;++t){var i=e.childNodes[t];switch(i.nodeType){case 1:a+=n.addDisplayHook(i);break;case 2:case 3:a+=s(i)}}return a},this.addDisplayHookById=function(e){return n.addDisplayHook(document.getElementById(e))};var f=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})},c=function(e){a(e);for(var n=0;n<o.length;++n){var i=o[n];i.nd.nodeValue=i.contents[e]}for(var n=0;n<l.length;++n){var i=l[n];i.nd.value=i.contents[e]}for(var r in t){var i=t[r],s=i.mce&&!i.mce.hidden;s&&i.mce.save({format:"html"}),i.fields[i.lang].value=i.contentField.value,i.lang=e;var g=i.fields[i.lang].value;i.contentField.placeholder&&""!=g&&(i.contentField.placeholder=""),i.contentField.value=g,s&&f(i)}};this.addDisplayHooks=function(e){for(var a=0;a<e.length;++a){var t=e[a];n.addDisplayHook(t)}},this.addDisplayHooksByClass=function(e,a){var t=a.getElementsByClassName(e);n.addDisplayHooks(t)},this.addDisplayHooksByTagInClass=function(e,a,t){for(var i=t.getElementsByClassName(e),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(a);n.addDisplayHooks(s)}},this.addCustomContentHooks=function(){for(var e=0;e<qTranslateConfig.custom_fields.length;++e){var a=qTranslateConfig.custom_fields[e];n.addContentHookByIdName(a)}for(var e=0;e<qTranslateConfig.custom_field_classes.length;++e){var a=qTranslateConfig.custom_field_classes[e];n.addContentHooksByClass(a)}setTinyMceInit()};var u=function(e){for(var a=0;a<e.length;++a){var t,i=e[a];if(i.form){if(i.form.id)t=document.getElementById(i.form.id);else if(i.form.jquery)t=$(i.form.jquery);else if(i.form.name){var r=document.getElementsByName(i.form.name);r&&r.length&&(t=r[0])}}else t=h();for(var o=0;o<i.fields.length;++o){var s=i.fields[o],l=[];if(s.container_id){var g=document.getElementById(s.container_id);g&&l.push(g)}else s.container_jquery?l=$(s.container_jquery):s.container_class?l=document.getElementsByClassName(s.container_class):t&&l.push(t);var f=s.encode;switch(f){case"display":if(s.id)n.addDisplayHook(document.getElementById(s.id));else if(s.jquery)for(var c=0;c<l.length;++c){var g=l[c],u=jQuery(g).find(s.jquery);n.addDisplayHooks(u)}else if(s.class)for(var c=0;c<l.length;++c)for(var g=l[c],u=g.getElementsByClassName(s.class),d=0;d<u.length;++d){var v=u[d];s.tag&&s.tag!=v.tagName||n.addDisplayHook(v)}else{if(!s.tag)continue;for(var c=0;c<l.length;++c){var g=l[c],C=g.getElementsByTagName(s.tag);n.addDisplayHooks(C)}}break;case"[":case"<":case"byline":default:if(!t)continue;if(s.id)n.addContentHookById(s.id,f);else if(s.jquery)for(var c=0;c<l.length;++c){var g=l[c],u=jQuery(g).find(s.jquery);n.addContentHooks(u,f)}else if(s.class)for(var c=0;c<l.length;++c)for(var g=l[c],u=g.getElementsByClassName(s.class),d=0;d<u.length;++d){var v=u[d];s.tag&&s.tag!=v.tagName||(!s.name||v.name&&s.name==v.name)&&n.addContentHook(v,f)}else{if(!s.tag)continue;for(var c=0;c<l.length;++c)for(var g=l[c],u=g.getElementsByTagName(s.tag),d=0;d<u.length;++d){var v=u[d];(!s.name||v.name&&s.name==v.name)&&n.addContentHook(v,f)}}}}}},d=function(){function e(e){var n=e.id;if(n){var a=t[n];if(a&&!a.mce){a.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var i=a.updateTinyMCEonInit;if(null==i){var r=e.getContent({format:"html"}).replace(/\s+/g,""),o=a.contentField.value.replace(/\s+/g,"");i=r!=o}return i&&f(a),a}}}setTinyMceInit=function(){if(window.tinyMCE)for(var n in t){var a=t[n];if("TEXTAREA"===a.contentField.tagName&&!a.mce&&!a.mceInit&&tinyMCEPreInit.mceInit[n]){if(a.mceInit=tinyMCEPreInit.mceInit[n],a.mceInit.wpautop){a.wpautop=a.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+n+"-wrap");i&&i.length&&(a.wrapper=i[0],a.wrapper&&(tinymce.DOM.hasClass(a.wrapper,"tmce-active")&&(a.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(a.wrapper,"html-active")&&(a.updateTinyMCEonInit=!1)))}else a.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[n].init_instance_callback=function(n){e(n)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var n=0;n<tinyMCE.editors.length;++n){var a=tinyMCE.editors[n];e(a)}},window.addEventListener("load",loadTinyMceHooks)};qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){qTranslateConfig.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){qTranslateConfig.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsSave.length;++n){var a=qTranslateConfig.onTabSwitchFunctionsSave[n];if(a==e)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(n,1)}},this.addLanguageSwitchAfterListener=function(e){qTranslateConfig.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsLoad.length;++n){var a=qTranslateConfig.onTabSwitchFunctionsLoad[n];if(a==e)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(n,1)}},this.enableLanguageSwitchingButtons=function(e){var n=e?"block":"none";for(var a in qTranslateConfig.tabSwitches){for(var t=qTranslateConfig.tabSwitches[a],i=0;i<t.length;++i){var r=(t[i],t[i].parentElement);r.style.display=n;break}break}};var h=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){var a=e[n],t=a.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var n=0;n<t.length;++n){var i=t[n];if(e=i.getElementsByClassName("wrap"),e.length)return i}return null};if("function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&u(qTranslateConfig.page_config.forms),!o.length&&!l.length){var v=!1;for(var C in t){v=!0;break}if(!v)return}this.switchActiveLanguage=function(){var e=this,n=e.lang;if(!n)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang");if(qTranslateConfig.activeLanguage!==n){if(qTranslateConfig.activeLanguage){for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],t=0;t<a.length;++t)a[t].classList.remove(qTranslateConfig.lsb_style_active_class);for(var i=qTranslateConfig.onTabSwitchFunctionsSave,t=0;t<i.length;++t)i[t].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n)}var r=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=n;for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],t=0;t<a.length;++t)a[t].classList.add(qTranslateConfig.lsb_style_active_class);for(var o=qTranslateConfig.onTabSwitchFunctions,t=0;t<o.length;++t)o[t].call(qTranslateConfig.qtx,n,r);for(var s=qTranslateConfig.onTabSwitchFunctionsLoad,t=0;t<s.length;++t)s[t].call(qTranslateConfig.qtx,n,r)}};var m=function(){var e=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class}),n=qTranslateConfig.language_config;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var a in n){var t=n[a],i=qTranslateConfig.flag_location,r=qtranxj_ce("li",{lang:a,className:"qtranxs-lang-switch",onclick:qTranslateConfig.qtx.switchActiveLanguage},e);qtranxj_ce("img",{src:i+t.flag},r),qtranxj_ce("span",{innerHTML:t.name},r),qTranslateConfig.activeLanguage==a&&r.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[a]||(qTranslateConfig.tabSwitches[a]=[]),qTranslateConfig.tabSwitches[a].push(r)}return e};if(qTranslateConfig.LSB){d();var T=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var q=0;q<qTranslateConfig.page_config.anchors.length;++q){var p=qTranslateConfig.page_config.anchors[q],y=document.getElementById(p.id);y&&(p.f=y,T.push(p))}if(!T.length){var y=e.langSwitchWrapAnchor;y||(y=h()),y&&T.push({f:y,where:"before"})}for(var q=0;q<T.length;++q){var p=T[q];if(!p.where||p.where.indexOf("before")>=0){var w=m();p.f.parentNode.insertBefore(w,p.f)}if(p.where&&p.where.indexOf("after")>=0){var w=m();p.f.parentNode.insertBefore(w,p.f.nextSibling)}if(p.where&&p.where.indexOf("first")>=0){var w=m();p.f.insertBefore(w,p.f.firstChild)}if(p.where&&p.where.indexOf("last")>=0){var w=m();p.f.insertBefore(w,null)}}this.addLanguageSwitchListener(c),e.onTabSwitch&&this.addLanguageSwitchListener(e.onTabSwitch)}};qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx||new qTranslateX(qTranslateConfig.js),qTranslateConfig.qtx},jQuery(document).ready(qTranslateConfig.js.get_qtx);