function qtranxj_get_cookie(e){for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var t=a[n],r=t.split("=");if(r[0].trim()==e&&!(a.length<2))return r[1].trim()}return""}function qtranxj_isArray(e){return e.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(e,a,n,t){var r=document.createElement(e);if(a)for(prop in a)r[prop]=a[prop];return n&&(t&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r}function LanguageSwitch(e,a){function n(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(i!==e.lang){i&&l[i].classList.remove("active"),i=e.lang,e.classList.add("active");for(var a=0;a<o.length;a++)o[a].call(this)}}var t=qTranslateConfig.enabled_languages,r=qTranslateConfig.language_name,i=a,l={},o=[];location.pathname.indexOf();for(var g=0;g<t.length;g++){var s=qTranslateConfig.WP_CONTENT_URL+qTranslateConfig.flag_location,u=t[g],f=qtranxj_ce("li",{lang:u,className:"qtranxs-lang-switch",onclick:n},e);qtranxj_ce("img",{src:s+qTranslateConfig.flag[u]},f),qtranxj_ce("span",{innerHTML:r[u]},f),l[u]=f,i==u&&f.classList.add("active")}this.getActiveLanguage=function(){return i},this.onSwitch=function(e){"function"==typeof e&&o.push(e)}}qtranxj_split=function(e){for(var a=new Object,n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n];a[t]=""}var r=/(<!--.*?-->)/gi,i=e.xsplit(r);if(!qtranxj_isArray(i))return a;var l,o;if(i.length>1)l=/<!--:([a-z]{2})-->/gi,o=/<!--:-->/gi;else{var g=/(\[:[a-z]{2}\])/gi;if(i=e.xsplit(g),!qtranxj_isArray(i))return a;l=/\[:([a-z]{2})\]/gi}if(!i.length)return a;if(1==i.length)for(var s=i[0],u=0;u<qTranslateConfig.enabled_languages.length;u++){var t=qTranslateConfig.enabled_languages[u];a[t]+=s}else for(var f,t=!1,n=0;n<i.length;n++){var s=i[n];s.length&&(null!=(f=l.exec(s))?t=f[1]:o&&o.test(s)?t=!1:t&&(a[t]+=s,t=!1))}for(var c=/(<!--more-->|<!--nextpage-->)+$/gi,n=0;n<a.length;n++)a[n]=a[n].replace(c,"");return a},qtranxj_join_c=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],r=e[t];r&&""!=r&&(a+="<!--:"+t+"-->",a+=r,a+="<!--:-->")}return a},qtranxj_join_b=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],r=e[t];r&&""!=r&&(a+="[:"+t+"]",a+=r)}return a},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var a,n=0,t=[];null!=(a=e.exec(this));)t.push(this.slice(n,a.index)),a.length>1&&t.push(a[1]),n=e.lastIndex;return n<this.length&&t.push(this.slice(n)),n==this.length&&t.push(""),t};var qTranslateX=function(){function e(e){return document.getElementById(e)}function a(e,a){var n=g[e],t=languageSwitch.getActiveLanguage(),r=/(<!--more-->|<!--nextpage-->)+$/gi;n.contents[t]=a.replace(r,""),n.mlContentField.value="<"===n.separator?qtranxj_join_c(n.contents):qtranxj_join_b(n.contents)}function n(e,n,t){if(e){var r=g[e.id]={};r.contentField=e,r.contents=qtranxj_split(e.value),r.mlContentField=qtranxj_ce(e.tagName,{name:e.name,className:"hidden",value:e.value},n,!0),t||(t="TEXTAREA"===e.tagName?"<":"["),r.separator=t,e.name+="_edit",e.value=r.contents[o],e.onblur=function(){a(this.id,this.value)}}}function t(e,a){n(e,a,"<")}function r(e,a){n(e,a,"[")}function i(){var a,n,t=!!e("tag-name");t?(a="tag-",n="addtag"):(a="",n="edittag");var r=e(a+"name"),i=e(n);if(!i||!r)return!1;var l=qtranxj_get_cookie("qtrans_admin_language");l||(l=qTranslateConfig.default_language),build_translator=function(e,a){var n={};for(var t in qTranslateConfig.term_name){var r=qTranslateConfig.term_name[t],i=r[e],l=r[a];if(!i||!l){var o=r[qTranslateConfig.default_language];if(!o)continue;i||(i=o+"("+qTranslateConfig.default_language+")"),l||(l=o+"("+qTranslateConfig.default_language+")")}n[i]=l}return n};var g=e("the-list");hideQuickEdit=function(){if(g)for(var e=g.getElementsByTagName("TR"),a=0;a<e.length;a++)for(var n=e[a],t=n.getElementsByTagName("TD")[0],r=t.getElementsByClassName("inline"),i=0;i<r.length;i++){var l=r[i];l.style.display="none"}},hideQuickEdit(),updateNames=function(e,a){if(g)for(var n=g.getElementsByTagName("TR"),t=0;t<n.length;t++){for(var r,i=n[t],o=i.getElementsByTagName("TD")[0],s=o.getElementsByTagName("DIV"),u=0;u<s.length;u++){var f=s[u];if("name"===f.className){r=f.innerHTML;break}}if(l!=qTranslateConfig.default_language){var c=build_translator(l,qTranslateConfig.default_language);r=c[r]}for(var d=qTranslateConfig.term_name[r]||{},h=d[e]||"",v=d[a]||"",m=o.getElementsByClassName("row-title"),_=0;_<m.length;_++){var f=m[_];h?f.innerHTML=f.innerHTML.replace(h,v):f.innerHTML+=v}}};var s=document.getElementsByClassName("tagcloud")[0];updateTagCloud=function(e,a){if(s){var n=s.getElementsByTagName("A");if(n.length)for(var t=build_translator(e,a),r=0;r<n.length;r++){var i=n[r],l=i.innerHTML,o=t[l];o&&(i.innerHTML=o)}}},updateNamesAndTagCloud=function(e,a){updateNames(e,a),updateTagCloud(e,a)},l!==o&&updateNamesAndTagCloud(l,o);var u=qtranxj_ce("input",{name:r.name,className:"hidden",value:r.value},i,!0);r.name="";var f=qTranslateConfig.term_name[r.value]||{};o!==qTranslateConfig.default_language&&(r.value=f[o]||""),editinline_activated=function(){return!0};for(var c=document.getElementsByClassName("editinline"),d=0;d<c.length;d++){var h=c[d];"A"===h.tagName&&h.addEventListener("click",editinline_activated)}onTabSwitch=function(){o!==this.lang&&(r.value=f[this.lang]||"",updateNamesAndTagCloud(o,this.lang),o=this.lang)};for(var v=qTranslateConfig.enabled_languages,m={},d=0;d<v.length;d++){var _=v[d];m[_]=qtranxj_ce("input",{name:"qtranx_term_"+_,className:"hidden",value:name[_]||""},i,!0)}return r.onblur=function(){var e=languageSwitch.getActiveLanguage();m[e].value=this.value,f[e]=this.value,e===qTranslateConfig.default_language&&(u.value=this.value)},!0}function l(){function i(e,a){switch(qTranslateConfig.url_mode.toString()){case"1":e.search?e.search+="&lang="+a:e.search="?lang="+a;break;case"2":var n=e.pathname.indexOf(qTranslateConfig.url_info.home);e.pathname=qTranslateConfig.url_info.home+a+e.pathname.substring(n+qTranslateConfig.url_info.home.length-1);break;case"3":e.host=a+"."+e.host}}function l(a){if(!T){var n=e("view-post-btn");if(!n||!n.children.length)return;if(T=n.children[0],"A"!=T.tagName)return;q=T.href,C=qtranxj_ce("a",{})}C.href=q,i(C,a),T.href=C.href;var t=e("preview-action");if(t&&t.children.length&&(t.children[0].href=C.href),1!=qTranslateConfig.url_mode){if(!w){var r=e("sample-permalink");r&&r.childNodes.length&&(w=r.childNodes[0],x=w.nodeValue)}w&&(C.href=x,i(C,a),w.nodeValue=C.href)}}function s(e){var n=e.id;if(n){var t=g[n];t.mce||(t.mce=e,e.getBody().addEventListener("blur",function(){a(e.id,e.getContent())}))}}var u=e("post");if(!u)return!1;var f=e("title");f&&t(f,u);for(var c=u.getElementsByClassName("wp-editor-area"),d=0;d<c.length;++d){var h=c[d];t(h,u)}var v=e("attachment_caption");v&&t(v,u);for(var d=0;d<qTranslateConfig.custom_fields.length;++d){var m=qTranslateConfig.custom_fields[d],_=e(m);n(_,u)}var p=e("attachment_alt");p&&r(p,u);var T,q,C,w,x;return l(o),onTabSwitch=function(){for(var e in g){var a=g[e];a.contentField.value=a.contents[this.lang]}if(p&&(p.value=alttexts[this.lang]),l(this.lang),window.tinyMCE)for(var n=0;n<tinyMCE.editors.length;++n){var t=tinyMCE.editors[n],a=g[t.id];a&&t.setContent(a.contentField.value)}},window.addEventListener("load",function(){if(window.tinyMCE){for(var e=0;e<tinyMCE.editors.length;++e){var a=tinyMCE.editors[e];s(a)}for(var n in g){var t=g[n];t.mce||"TEXTAREA"===t.contentField.tagName&&(tinyMCEPreInit.mceInit[n].init_instance_callback=function(e){s(e)})}}}),!0}var o=qtranxj_get_cookie("qtrans_edit_language");o||(o=qTranslateConfig.default_language);var g={};setLangCookie=function(){document.cookie="qtrans_edit_language="+this.lang};var s=location.pathname.match(/(\/wp-admin\/([^\/]*))$/);switch(s&&s[1]){case"/wp-admin/post.php":case"/wp-admin/post-new.php":if(!l())return;break;case"/wp-admin/edit-tags.php":if(!i())return;break;default:return}var u=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"}),f=document.getElementsByClassName("wrap")[0],c=f.getElementsByTagName("form")[0];c.parentNode.insertBefore(u,c),languageSwitch=new LanguageSwitch(u,o),languageSwitch.onSwitch(onTabSwitch),languageSwitch.onSwitch(setLangCookie)};new qTranslateX;