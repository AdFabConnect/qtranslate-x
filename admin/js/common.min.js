function qtranxj_get_cookie(e){for(var n=document.cookie.split(";"),t=0;t<n.length;++t){var a=n[t],i=a.split("=");if(i[0].trim()==e&&!(n.length<2))return i[1].trim()}return""}function qtranxj_ce(e,n,t,a){var i=document.createElement(e);if(n)for(prop in n)i[prop]=n[prop];return t&&(a&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),i}qtranxj_get_split_blocks=function(e){var n=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi;return e.xsplit(n)},qtranxj_split=function(e){var n=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(n)},qtranxj_split_blocks=function(e){var n=new Object;for(var t in qTranslateConfig.language_config)n[t]="";if(!e||!e.length)return n;if(1==e.length){var a=e[0];for(var t in qTranslateConfig.language_config)n[t]+=a;return n}for(var i,r=/<!--:([a-z]{2})-->/gi,o=/\[:([a-z]{2})\]/gi,s=/\{:([a-z]{2})\}/gi,t=!1,l=0;l<e.length;++l){var a=e[l];if(a.length)if(i=r.exec(a),r.lastIndex=0,null==i)if(i=o.exec(a),o.lastIndex=0,null==i)if(i=s.exec(a),s.lastIndex=0,null==i)if("<!--:-->"!=a&&"[:]"!=a&&"{:}"!=a)if(t)n[t]?n[t]+=a:n[t]=a,t=!1;else for(var f in n)n[f]+=a;else t=!1;else t=i[1];else t=i[1];else t=i[1]}return n},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var n,t=0,a=[];null!=(n=e.exec(this));)a.push(this.slice(t,n.index)),n.length>1&&a.push(n[1]),t=e.lastIndex;return t<this.length&&a.push(this.slice(t)),t==this.length&&a.push(""),a};var qTranslateX=function(e){var n=this;qTranslateConfig.qtx=this,this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(e){return!!qTranslateConfig.language_config[e]};var t=function(e){document.cookie="qtrans_edit_language="+e};qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?t(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,t(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage},this.getLanguages=function(){return qTranslateConfig.language_config};var a={};this.hasContentHook=function(e){return a[e]},this.addContentHook=function(e,t,i){if(!e)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":switch(e.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!i){if(!e.name)return!1;i=e.name}if(e.id){if(a[e.id]){if(jQuery.contains(document,e))return a[e.id];n.removeContentHook(e)}}else if(a[i]){var r=0;do++r,e.id=i+r;while(a[e.id])}else e.id=i;var o=a[e.id]={};o.name=i,o.contentField=e,o.lang=qTranslateConfig.activeLanguage;var s=qtranxj_split(e.value);qTranslateConfig.RAW||(e.value=s[o.lang]);var l;if(t)switch(t){case"slug":l="qtranslate-slugs[";break;case"term":l="qtranslate-terms[";break;default:l="qtranslate-fields["}else t="[",l="qtranslate-fields[";var f,c,g=o.name.indexOf("[");if(0>g)f=l+o.name+"]";else if(f=l+o.name.substring(0,g)+"]",o.name.lastIndexOf("[]")<0)f+=o.name.substring(g);else{var u=o.name.length-2;u>g&&(f+=o.name.substring(g,u)),c="[]"}o.fields={};for(var d in s){var h=s[d],v=f+"["+d+"]";c&&(v+=c);var C=qtranxj_ce("input",{name:v,type:"hidden",className:"hidden",value:h});o.fields[d]=C,e.parentNode.insertBefore(C,e)}switch(t){case"slug":case"term":o.sepfield=qtranxj_ce("input",{name:f+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:s[qTranslateConfig.default_language]});break;default:o.sepfield=qtranxj_ce("input",{name:f+"[qtranslate-separator]",type:"hidden",className:"hidden",value:t})}return e.parentNode.insertBefore(o.sepfield,e),o.encode=t,e.className+=" qtranxs-translatable",o},this.addContentHookC=function(e){return n.addContentHook(e,"[")},this.addContentHookB=function(e){return n.addContentHook(e,"[")},this.addContentHookById=function(e,t,a){return n.addContentHook(document.getElementById(e),t,a)},this.addContentHookByIdName=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return n.addContentHookById(e,t)},this.addContentHookByIdC=function(e){return n.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return n.addContentHookById(e,"[")},this.addContentHooks=function(e,t,a){for(var i=0;i<e.length;++i){var r=e[i];n.addContentHook(r,t,a)}};var i=function(e,t,a){t||(t=document);var i=t.getElementsByClassName(e);n.addContentHooks(i,a)};this.addContentHooksByClass=function(e,n){var t;(0==e.indexOf("<")||0==e.indexOf("["))&&(t=e.substring(0,1),e=e.substring(1)),i(e,n,t)},this.addContentHooksByTagInClass=function(e,t,a){for(var i=a.getElementsByClassName(e),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(t);n.addContentHooks(s)}};var r=function(e){if(!e)return!1;e.sepfield&&jQuery(e.sepfield).remove();for(var n in e.fields)jQuery(e.fields[n]).remove();return delete a[e.contentField.id],!0};this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!a[e.id])return!1;var n=a[e.id];return r(n),jQuery(e).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e)return!1;if(!e.id)return!1;var t=a[e.id];return t&&r(t),n.addContentHook(e)};var o=function(e){if(e[qTranslateConfig.language])return"("+qTranslateConfig.language+") "+e[qTranslateConfig.language];if(e[qTranslateConfig.default_language])return"("+qTranslateConfig.default_language+") "+e[qTranslateConfig.default_language];for(var n in e)if(e[n])return"("+n+") "+e[n];return""},s=function(e){var n=null;for(var t in e)e[t]||(n||(n=o(e)),e[t]=n)},l=[],f=function(e){if(!e.nodeValue)return 0;var n=qtranxj_get_split_blocks(e.nodeValue);if(!n||!n.length||1==n.length)return 0;var t={};return t.nd=e,t.contents=qtranxj_split_blocks(n),s(t.contents),e.nodeValue=t.contents[qTranslateConfig.activeLanguage],l.push(t),1},c=[],g=function(e,n){if(!e.hasAttribute(n))return 0;var t=e.getAttribute(n),a=qtranxj_get_split_blocks(t);if(!a||!a.length||1==a.length)return 0;var i={};return i.nd=e,i.attr=n,i.contents=qtranxj_split_blocks(a),s(i.contents),e.setAttribute(n,i.contents[qTranslateConfig.activeLanguage]),c.push(i),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return g(e,"value");default:return 0}}var t=0;if(e.childNodes&&e.childNodes.length)for(var a=0;a<e.childNodes.length;++a){var i=e.childNodes[a];switch(i.nodeType){case 1:t+=n.addDisplayHook(i);break;case 2:case 3:t+=f(i)}}return t},this.addDisplayHookById=function(e){return n.addDisplayHook(document.getElementById(e))};var u=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})},d=function(e){t(e);for(var n=l.length;--n>=0;){var i=l[n];i.nd.parentNode?i.nd.nodeValue=i.contents[e]:l.splice(n,1)}for(var n=c.length;--n>=0;){var i=c[n];i.nd.parentNode?i.nd.setAttribute(i.attr,i.contents[e]):c.splice(n,1)}for(var r in a){var i=a[r],o=i.mce&&!i.mce.hidden;o&&i.mce.save({format:"html"}),i.fields[i.lang].value=i.contentField.value,i.lang=e;var s=i.fields[i.lang].value;i.contentField.placeholder&&""!=s&&(i.contentField.placeholder=""),i.contentField.value=s,o&&u(i)}};this.addDisplayHooks=function(e){for(var t=0;t<e.length;++t){var a=e[t];n.addDisplayHook(a)}},this.addDisplayHookAttrs=function(e,n){for(var t=0;t<n.length;++t){var a=n[t];g(e,a)}},this.addDisplayHooksAttrs=function(e,t){for(var a=0;a<e.length;++a){var i=e[a];n.addDisplayHookAttrs(i,t)}},this.addDisplayHooksByClass=function(e,t){var a=t.getElementsByClassName(e);n.addDisplayHooks(a)},this.addDisplayHooksByTagInClass=function(e,t,a){for(var i=a.getElementsByClassName(e),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(t);n.addDisplayHooks(s)}},this.addCustomContentHooks=function(){for(var e=0;e<qTranslateConfig.custom_fields.length;++e){var t=qTranslateConfig.custom_fields[e];n.addContentHookByIdName(t)}for(var e=0;e<qTranslateConfig.custom_field_classes.length;++e){var t=qTranslateConfig.custom_field_classes[e];n.addContentHooksByClass(t)}qTranslateConfig.LSB&&setTinyMceInit()};var h=function(e){e(".i18n-multilingual").each(function(e,t){n.addContentHook(t,"[")}),e(".i18n-multilingual-curly").each(function(e,t){n.addContentHook(t,"{")}),e(".i18n-multilingual-term").each(function(e,t){n.addContentHook(t,"term")}),e(".i18n-multilingual-slug").each(function(e,t){n.addContentHook(t,"slug")}),e(".i18n-multilingual-display").each(function(e,t){n.addDisplayHook(t)})},v=function(e){for(var t in e){var a,i=e[t];if(i.form){if(i.form.id)a=document.getElementById(i.form.id);else if(i.form.jquery)a=$(i.form.jquery);else if(i.form.name){var r=document.getElementsByName(i.form.name);r&&r.length&&(a=r[0])}}else a=document.getElementById(t);a||(a=m(),a||(a=document));for(var o in i.fields){var s=i.fields[o],l=[];if(s.container_id){var f=document.getElementById(s.container_id);f&&l.push(f)}else s.container_jquery?l=$(s.container_jquery):s.container_class?l=document.getElementsByClassName(s.container_class):l.push(a);var c=s.encode;switch(c){case"none":continue;case"display":if(s.jquery)for(var g=0;g<l.length;++g){var f=l[g],u=jQuery(f).find(s.jquery);s.attrs?n.addDisplayHooksAttrs(u,s.attrs):n.addDisplayHooks(u)}else{var d=s.id?s.id:o,h=document.getElementById(d);s.attrs?n.addDisplayHookAttrs(h,s.attrs):n.addDisplayHook(h)}break;case"[":case"<":case"{":case"byline":default:if(s.jquery)for(var g=0;g<l.length;++g){var f=l[g],u=jQuery(f).find(s.jquery);n.addContentHooks(u,c,s.name)}else{var d=s.id?s.id:o;n.addContentHookById(d,c,s.name)}}}}},C=function(){function e(e){var n=e.id;if(n){var t=a[n];if(t&&!t.mce){t.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var r=e.getContent({format:"html"}).replace(/\s+/g,""),o=t.contentField.value.replace(/\s+/g,"");i=r!=o}return i&&u(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var n in a){var t=a[n];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[n]){if(t.mceInit=tinyMCEPreInit.mceInit[n],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+n+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[n].init_instance_callback=function(n){e(n)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE&&tinyMCE.editors)for(var n=0;n<tinyMCE.editors.length;++n){var t=tinyMCE.editors[n];e(t)}},window.addEventListener("load",loadTinyMceHooks)};qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){qTranslateConfig.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){qTranslateConfig.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsSave.length;++n){var t=qTranslateConfig.onTabSwitchFunctionsSave[n];if(t==e)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(n,1)}},this.addLanguageSwitchAfterListener=function(e){qTranslateConfig.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsLoad.length;++n){var t=qTranslateConfig.onTabSwitchFunctionsLoad[n];if(t==e)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(n,1)}},this.enableLanguageSwitchingButtons=function(e){var n=e?"block":"none";for(var t in qTranslateConfig.tabSwitches){for(var a=qTranslateConfig.tabSwitches[t],i=0;i<a.length;++i){var r=(a[i],a[i].parentElement);r.style.display=n;break}break}};var m=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){var t=e[n],a=t.getElementsByTagName("form");if(a.length)return a[0]}var a=document.getElementsByTagName("form");if(1===a.length)return a[0];for(var n=0;n<a.length;++n){var i=a[n];if(e=i.getElementsByClassName("wrap"),e.length)return i}return null};if("function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&v(qTranslateConfig.page_config.forms),h(jQuery),!l.length&&!c.length){var q=!1;for(var T in a){q=!0;break}if(!q)return}this.switchActiveLanguage=function(){var e=this,n=e.lang;if(!n)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang");if(qTranslateConfig.activeLanguage!==n){if(qTranslateConfig.activeLanguage){for(var t=!0,a=qTranslateConfig.onTabSwitchFunctionsSave,i=0;i<a.length;++i){var r=a[i].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n);r===!1&&(t=!1)}if(!t)return;for(var o=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],i=0;i<o.length;++i)o[i].classList.remove(qTranslateConfig.lsb_style_active_class)}var s=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=n;for(var o=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],i=0;i<o.length;++i)o[i].classList.add(qTranslateConfig.lsb_style_active_class);for(var l=qTranslateConfig.onTabSwitchFunctions,i=0;i<l.length;++i)l[i].call(qTranslateConfig.qtx,n,s);for(var f=qTranslateConfig.onTabSwitchFunctionsLoad,i=0;i<f.length;++i)f[i].call(qTranslateConfig.qtx,n,s)}};var p=function(){var e=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class}),n=qTranslateConfig.language_config;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var t in n){var a=n[t],i=qTranslateConfig.flag_location,r=qtranxj_ce("li",{lang:t,className:"qtranxs-lang-switch",onclick:qTranslateConfig.qtx.switchActiveLanguage},e);qtranxj_ce("img",{src:i+a.flag},r),qtranxj_ce("span",{innerHTML:a.name},r),qTranslateConfig.activeLanguage==t&&r.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[t]||(qTranslateConfig.tabSwitches[t]=[]),qTranslateConfig.tabSwitches[t].push(r)}return e},y=function(e){var n=document.getElementById("qtranxs-meta-box-lsb");if(n){var t=n.getElementsByClassName("inside");if(t.length){n.className+=" closed",e(n).find(".hndle").remove();var a=document.createElement("span");n.insertBefore(a,t[0]),a.className="hndle ui-sortable-handle";var i=p();a.appendChild(i),e(function(e){e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")})}}};if(qTranslateConfig.LSB){C(),y(jQuery);var w=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var b in qTranslateConfig.page_config.anchors){var _=qTranslateConfig.page_config.anchors[b],k=document.getElementById(b);if(k)w.push({f:k,where:_.where});else if(_.jquery)for(var x=jQuery(_.jquery),L=0;L<x.length;++L){var k=x[L];w.push({f:k,where:_.where})}}if(!w.length){var k=e.langSwitchWrapAnchor;k||(k=m()),k&&w.push({f:k,where:"before"})}for(var L=0;L<w.length;++L){var _=w[L];if(!_.where||_.where.indexOf("before")>=0){var H=p();_.f.parentNode.insertBefore(H,_.f)}if(_.where&&_.where.indexOf("after")>=0){var H=p();_.f.parentNode.insertBefore(H,_.f.nextSibling)}if(_.where&&_.where.indexOf("first")>=0){var H=p();_.f.insertBefore(H,_.f.firstChild)}if(_.where&&_.where.indexOf("last")>=0){var H=p();_.f.insertBefore(H,null)}}this.addLanguageSwitchListener(d),e.onTabSwitch&&this.addLanguageSwitchListener(e.onTabSwitch)}};qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx||new qTranslateX(qTranslateConfig.js),qTranslateConfig.qtx},jQuery(document).ready(qTranslateConfig.js.get_qtx);