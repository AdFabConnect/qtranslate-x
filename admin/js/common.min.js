function qtranxj_get_cookie(n){for(var t=document.cookie.split(";"),e=0;e<t.length;++e){var a=t[e],i=a.split("=");if(i[0].trim()==n&&!(t.length<2))return i[1].trim()}return""}function qtranxj_isArray(n){return n.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(n,t,e,a){var i=document.createElement(n);if(t)for(prop in t)i[prop]=t[prop];return e&&(a&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),i}function qtranxj_LanguageSwitch(n,t){function e(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(r!==n.lang){r&&o[r].classList.remove("active"),r=n.lang,n.classList.add("active");for(var t=0;t<s.length;++t)s[t].call(this)}}for(var a=qTranslateConfig.enabled_languages,i=qTranslateConfig.language_name,r=t,o={},s=[],l=0;l<a.length;++l){var g=qTranslateConfig.flag_location,u=a[l],d=qtranxj_ce("li",{lang:u,className:"qtranxs-lang-switch",onclick:e},n);qtranxj_ce("img",{src:g+qTranslateConfig.flag[u]},d),qtranxj_ce("span",{innerHTML:i[u]},d),o[u]=d,r==u&&d.classList.add("active")}this.getActiveLanguage=function(){return r},this.onSwitch=function(n){"function"==typeof n&&s.push(n)}}qtranxj_split=function(n,t){for(var e=new Object,a=0;a<qTranslateConfig.enabled_languages.length;++a){var i=qTranslateConfig.enabled_languages[a];e[i]=""}var r=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\])/gi,o=n.xsplit(r);if(!qtranxj_isArray(o))return e;if(1==o.length){for(var s=o[0],l=0;l<qTranslateConfig.enabled_languages.length;++l){var i=qTranslateConfig.enabled_languages[l];e[i]+=s}return e}var g=/<!--:([a-z]{2})-->/gi,u=/<!--:-->/g,d=/\[:([a-z]{2})\]/gi;i=!1;for(var a=0;a<o.length;++a){var s=o[a];if(s.length)if(matches=g.exec(s),g.lastIndex=0,null==matches)if(matches=u.exec(s),u.lastIndex=0,null==matches)if(matches=d.exec(s),d.lastIndex=0,null==matches){if(i)e[i]+=s,i=!1;else if(t)for(var c in e)e[c]+=s}else i=matches[1];else i=!1;else i=matches[1]}return e},qtranxj_allthesame=function(n){if(0==qTranslateConfig.enabled_languages.length)return"";for(var t="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],i=n[a];if(i&&""!=i){t=i;break}}if(""==t)return t;for(var e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],i=n[a];if(i!=t)return null}return t},qtranxj_join_c=function(n){var t=qtranxj_allthesame(n);if(null!=t)return t;t="";for(var e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],i=n[a];i&&""!=i&&(t+="<!--:"+a+"-->",t+=i,t+="<!--:-->")}return t},qtranxj_join_b=function(n){var t=qtranxj_allthesame(n);if(null!=t)return t;for(var t="",e=0;e<qTranslateConfig.enabled_languages.length;++e){var a=qTranslateConfig.enabled_languages[e],i=n[a];i&&""!=i&&(t+="[:"+a+"]",t+=i)}return t},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var t,e=0,a=[];null!=(t=n.exec(this));)a.push(this.slice(e,t.index)),t.length>1&&a.push(t[1]),e=n.lastIndex;return e<this.length&&a.push(this.slice(e)),e==this.length&&a.push(""),a};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},isLanguageEnabled=function(n){for(var t=0;t<qTranslateConfig.enabled_languages.length;++t)if(qTranslateConfig.enabled_languages[t]==n)return!0;return!1};var t=qtranxj_get_cookie("wp_qtrans_edit_language");t&&isLanguageEnabled(t)||(t=qTranslateConfig.language),this.getInitialLanguage=function(){return t};var e=[],a={};updateFusedValueH=function(n,t){var e=a[n],i=languageSwitch.getActiveLanguage(),r=t.trim();e.contents[i]=r,e.mlContentField.value="<"===e.separator?qtranxj_join_c(e.contents):qtranxj_join_b(e.contents)},addContentHook=function(n,e,i){if(!n)return!1;var r=a[n.id]={};r.contentField=n,r.contents=qtranxj_split(n.value,!1),r.mlContentField=qtranxj_ce("input",{name:n.name,type:"hidden",className:"hidden",value:n.value},e,!0),i||(i="TEXTAREA"===n.tagName?"<":"["),r.separator=i,n.name="edit-"+n.name;var o=r.contents[t];if(n.value=o,n.onblur=function(){updateFusedValueH(this.id,this.value)},window.tinyMCE)for(var s=0;s<tinyMCE.editors.length;++s){var l=tinyMCE.editors[s];l.id==n.id&&updateTinyMCE(l,o)}return r},this.addContentHookC=function(n,t){return addContentHook(n,t,"<")},this.addContentHookB=function(n,t){return addContentHook(n,t,"[")},this.addContentHookById=function(n,t,e){return addContentHook(this.ge(n),t,e)},this.addContentHookByIdName=function(n,t){var e;return(0==n.indexOf("<")||0==n.indexOf("["))&&(e=n.substring(0,1),n=n.substring(1)),this.addContentHookById(n,t,e)},this.addContentHookByIdC=function(n,t){return this.addContentHookById(n,t,"<")},this.addContentHookByIdB=function(n,t){return this.addContentHookById(n,t,"[")},addDisplayHook=function(n){if(!n)return!1;var a={};a.elem=n;var i=n.innerHTML.replace(/&lt;!--:([a-z]{2}|)--&gt;/gi,"<!--:$1-->");return a.contents=qtranxj_split(i,!0),n.innerHTML=a.contents[t],e.push(a),!0},setLangCookie=function(n){document.cookie="wp_qtrans_edit_language="+n},updateTinyMCE=function(n,t){t.match(/^</)||(t="<p>"+t+"</p>"),n.setContent(t,{format:"raw"})},onTabSwitch=function(){setLangCookie(this.lang);for(var n=0;n<e.length;++n){var t=e[n];t.elem.innerHTML=t.contents[this.lang]}for(var i in a){var t=a[i];t.contentField.value=t.contents[this.lang]}if(window.tinyMCE)for(var n=0;n<tinyMCE.editors.length;++n){var r=tinyMCE.editors[n],t=a[r.id];t&&updateTinyMCE(r,t.contentField.value)}};var i=this;if(onTabSwitchCustom=function(){n.onTabSwitch(this.lang,i)},this.addDisplayHooksByClass=function(n,t){for(var e=t.getElementsByClassName(n),a=0;a<e.length;++a){var i=e[a];addDisplayHook(i)}},this.addContentHooksByClass=function(n,t){var e;(0==n.indexOf("<")||0==n.indexOf("["))&&(e=n.substring(0,1),n=n.substring(1));for(var a=t.getElementsByClassName(n),i=0;i<a.length;++i){var r=a[i];addContentHook(r,t,e)}},this.addContentHooks=function(n){for(var t=0;t<qTranslateConfig.custom_fields.length;++t){var e=qTranslateConfig.custom_fields[t];this.addContentHookByIdName(e,n)}for(var t=0;t<qTranslateConfig.custom_field_classes.length;++t){var e=qTranslateConfig.custom_field_classes[t];this.addContentHooksByClass(e,n)}},this.addContentHooksTinyMCE=function(){function n(n){var t=n.id;if(t){var e=a[t];e&&(e.mce||(e.mce=n,n.getBody().addEventListener("blur",function(){var t=n.getContent({format:"raw"}).trim();if(t.match(/^<p[^>]*>(\s|&nbsp;|<br[^>]*>)*<\/p>$/))t="";else{var e=t.match(/^<p>\s*([^<]*)\s*<\/p>$/);e&&(t=e[1])}updateFusedValueH(n.id,t)})))}}window.addEventListener("load",function(){if(window.tinyMCE){for(var t=0;t<tinyMCE.editors.length;++t){var e=tinyMCE.editors[t];n(e)}for(var i in a){var r=a[i];r.mce||"TEXTAREA"===r.contentField.tagName&&(tinyMCEPreInit.mceInit[i].init_instance_callback=function(t){n(t)})}}})},n.addContentHooks(this)){var r=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"}),o=document.getElementsByClassName("wrap")[0],s=n.form;s||(s=o.getElementsByTagName("form")[0]),s.parentNode.insertBefore(r,s),languageSwitch=new qtranxj_LanguageSwitch(r,t),languageSwitch.onSwitch(onTabSwitch),n.onTabSwitch&&languageSwitch.onSwitch(onTabSwitchCustom)}};