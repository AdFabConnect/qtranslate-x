function qtranxj_get_cookie(e){for(var a=document.cookie.split(";"),n=0;n<a.length;++n){var t=a[n],i=t.split("=");if(i[0].trim()==e&&!(a.length<2))return i[1].trim()}return""}function qtranxj_ce(e,a,n,t){var i=document.createElement(e);if(a)for(prop in a)i[prop]=a[prop];return n&&(t&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}function qtranxj_LanguageSwitch(e){function a(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==e.lang){if(qTranslateConfig.activeLanguage)for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],n=0;n<a.length;++n)a[n].classList.remove(qTranslateConfig.lsb_style_active_class);qTranslateConfig.activeLanguage=e.lang;for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],n=0;n<a.length;++n)a[n].classList.add(qTranslateConfig.lsb_style_active_class);for(var t=qTranslateConfig.onTabSwitchFunctions,n=0;n<t.length;++n)t[n].call(qTranslateConfig.qtx,this.lang)}}var n=qTranslateConfig.enabled_languages,t=qTranslateConfig.language_name;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var i=0;i<n.length;++i){var r=qTranslateConfig.flag_location,s=n[i],o=qtranxj_ce("li",{lang:s,className:"qtranxs-lang-switch",onclick:a},e);qtranxj_ce("img",{src:r+qTranslateConfig.flag[s]},o),qtranxj_ce("span",{innerHTML:t[s]},o),qTranslateConfig.activeLanguage==s&&o.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[s]||(qTranslateConfig.tabSwitches[s]=[]),qTranslateConfig.tabSwitches[s].push(o)}}qtranxj_get_split_blocks=function(e){var a=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return e.xsplit(a)},qtranxj_split=function(e){var a=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(a)},qtranxj_split_blocks=function(e){for(var a=new Object,n=0;n<qTranslateConfig.enabled_languages.length;++n){var t=qTranslateConfig.enabled_languages[n];a[t]=""}if(!e||!e.length)return a;if(1==e.length){for(var i=e[0],r=0;r<qTranslateConfig.enabled_languages.length;++r){var t=qTranslateConfig.enabled_languages[r];a[t]+=i}return a}for(var s,o=/<!--:([a-z]{2})-->/gi,l=/\[:([a-z]{2})\]/gi,t=!1,n=0;n<e.length;++n){var i=e[n];if(i.length)if(s=o.exec(i),o.lastIndex=0,null==s)if(s=l.exec(i),l.lastIndex=0,null==s)if("<!--:-->"!=i&&"[:]"!=i)if(t)a[t]+=i,t=!1;else for(var g in a)a[g]+=i;else t=!1;else t=s[1];else t=s[1]}return a},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var a,n=0,t=[];null!=(a=e.exec(this));)t.push(this.slice(n,a.index)),a.length>1&&t.push(a[1]),n=e.lastIndex;return n<this.length&&t.push(this.slice(n)),n==this.length&&t.push(""),t};var qTranslateX=function(e){this.ge=function(e){return document.getElementById(e)},isLanguageEnabled=function(e){for(var a=0;a<qTranslateConfig.enabled_languages.length;++a)if(qTranslateConfig.enabled_languages[a]==e)return!0;return!1},setLangCookie=function(e){document.cookie="qtrans_edit_language="+e},qTranslateConfig.activeLanguage,qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage))):(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var a={};updateFusedValueH=function(e,n){var t=a[e],i=n.trim();t.fields[t.lang].value=i},addContentHook=function(e,n,t){if(!e)return!1;if(!e.name)return!1;switch(e.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(e.id||(e.id=e.tagName,n.id&&(e.id+=n.id),e.name&&(e.id+=e.name)),a[e.id])return!0;var i=a[e.id]={};i.name=e.name,i.contentField=e,i.lang=qTranslateConfig.activeLanguage;var r=qtranxj_split(e.value);e.value=r[i.lang];var s,o=i.name.indexOf("[");s=0>o?"qtranslate-fields["+i.name+"]":"qtranslate-fields["+i.name.substring(0,o)+"]"+i.name.substring(o),i.fields={};for(var l in r){var g=r[l],d=qtranxj_ce("input",{name:s+"["+l+"]",type:"hidden",className:"hidden",value:g});i.fields[l]=d,e.parentNode.insertBefore(d,e)}return t?"["!=t&&(i.sepfield=qtranxj_ce("input",{name:"qtranslate-fields["+e.name+"][sep]",type:"hidden",className:"hidden",value:t}),e.parentNode.insertBefore(i.sepfield,e)):t="[",i.separator=t,e.className+=" qtranxs-translatable",i},this.addContentHookC=function(e,a){return addContentHook(e,a,"<")},this.addContentHookB=function(e,a){return addContentHook(e,a,"[")},this.addContentHookById=function(e,a,n){return addContentHook(this.ge(e),a,n)},this.addContentHookByIdName=function(e,a){var n;return(0==e.indexOf("<")||0==e.indexOf("["))&&(n=e.substring(0,1),e=e.substring(1)),this.addContentHookById(e,a,n)},this.addContentHookByIdC=function(e,a){return this.addContentHookById(e,a,"<")},this.addContentHookByIdB=function(e,a){return this.addContentHookById(e,a,"[")},this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!a[e.id])return!1;var n=a[e.id];n.sepfield&&jQuery(n.sepfield).remove();for(var t in n.fields)jQuery(n.fields[t]).remove();return jQuery(e).removeClass("qtranxs-translatable"),delete a[e.id],!0};var n=[];addDisplayHookNode=function(e){if(!e.nodeValue)return 0;var a=qtranxj_get_split_blocks(e.nodeValue);if(!a||!a.length||1==a.length)return 0;var t={};return t.nd=e,t.contents=qtranxj_split_blocks(a),e.nodeValue=t.contents[qTranslateConfig.activeLanguage],n.push(t),1};var t=[];if(addDisplayHookAttr=function(e){if(!e.value)return 0;var a=qtranxj_get_split_blocks(e.value);if(!a||!a.length||1==a.length)return 0;var n={};return n.nd=e,n.contents=qtranxj_split_blocks(a),e.value=n.contents[qTranslateConfig.activeLanguage],t.push(n),1},addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return addDisplayHookAttr(e);default:return 0}}var a=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var t=e.childNodes[n];switch(t.nodeType){case 1:a+=addDisplayHook(t);break;case 2:case 3:a+=addDisplayHookNode(t)}}return a},this.addDisplayHookById=function(e){return addDisplayHook(this.ge(e))},updateTinyMCE=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})},onTabSwitch=function(e){setLangCookie(e);for(var i=0;i<n.length;++i){var r=n[i];r.nd.nodeValue=r.contents[e]}for(var i=0;i<t.length;++i){var r=t[i];r.nd.value=r.contents[e]}for(var s in a){var r=a[s],o=r.mce&&!r.mce.hidden;o&&r.mce.save({format:"html"}),r.fields[r.lang].value=r.contentField.value,r.lang=e;var l=r.fields[r.lang].value;r.contentField.placeholder&&""!=l&&(r.contentField.placeholder=""),r.contentField.value=l,o&&updateTinyMCE(r)}},qTranslateConfig.qtx=this,addDisplayHooks=function(e){for(var a=0;a<e.length;++a){var n=e[a];addDisplayHook(n)}},this.addDisplayHooksByClass=function(e,a){var n=a.getElementsByClassName(e);addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,a,n){for(var t=n.getElementsByClassName(e),i=0;i<t.length;++i){var r=t[i],s=r.getElementsByTagName(a);addDisplayHooks(s)}},addContentFieldHooks=function(e,a,n){for(var t=0;t<e.length;++t){var i=e[t];addContentHook(i,a,n)}},addContentHooksByClassName=function(e,a,n,t){n||(n=a);var i=n.getElementsByClassName(e);addContentFieldHooks(i,a,t)},this.addContentHooksByClass=function(e,a,n){var t;(0==e.indexOf("<")||0==e.indexOf("["))&&(t=e.substring(0,1),e=e.substring(1)),addContentHooksByClassName(e,a,n,t)},this.addCustomContentHooks=function(e){for(var a=0;a<qTranslateConfig.custom_fields.length;++a){var n=qTranslateConfig.custom_fields[a];this.addContentHookByIdName(n,e)}for(var a=0;a<qTranslateConfig.custom_field_classes.length;++a){var n=qTranslateConfig.custom_field_classes[a];this.addContentHooksByClass(n,e)}},this.addPageHooks=function(e){for(var a=0;a<e.length;++a){var n,t=e[a];n=t.form?document.getElementById(t.form.id):this.getWrapForm();for(var i=0;i<t.fields.length;++i){var r=t.fields[i],s=[];if(r.container_id){var o=document.getElementById(r.container_id);o&&s.push(o)}else r.container_class?s=document.getElementsByClassName(r.container_class):n&&s.push(n);var l=r.encode;switch(l){case"display":if(r.id)addDisplayHook(document.getElementById(r.id));else if(r.class)for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByClassName(r.class),c=0;c<d.length;++c){var f=d[c];r.tag&&r.tag!=f.tagName||addDisplayHook(f)}else{if(!r.tag)continue;for(var g=0;g<s.length;++g){var o=s[g],u=o.getElementsByTagName(r.tag);addDisplayHooks(u)}}break;case"[":case"<":case"byline":default:if(!n)continue;if(r.id)this.addContentHookById(r.id,n,l);else if(r.class)for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByClassName(r.class),c=0;c<d.length;++c){var f=d[c];r.tag&&r.tag!=f.tagName||(!r.name||f.name&&r.name==f.name)&&addContentHook(f,n,l)}else{if(!r.tag)continue;for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByTagName(r.tag),c=0;c<d.length;++c){var f=d[c];(!r.name||f.name&&r.name==f.name)&&addContentHook(f,n,l)}}}}}},this.addContentHooksTinyMCE=function(){function e(e){var n=e.id;if(n){var t=a[n];if(t&&!t.mce){t.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var r=e.getContent({format:"html"}).replace(/\s+/g,""),s=t.contentField.value.replace(/\s+/g,"");i=r!=s}return i&&updateTinyMCE(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var n in a){var t=a[n];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[n]){if(t.mceInit=tinyMCEPreInit.mceInit[n],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+n+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[n].init_instance_callback=function(a){e(a)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var a=0;a<tinyMCE.editors.length;++a){var n=tinyMCE.editors[a];e(n)}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),this.addTabSwitchListener=function(e){qTranslateConfig.onTabSwitchFunctions.push(e)},this.getWrapForm=function(){for(var e=document.getElementsByClassName("wrap"),a=0;a<e.length;++a){var n=e[a],t=n.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var a=0;a<t.length;++a){var i=t[a];if(e=i.getElementsByClassName("wrap"),e.length)return i}return null},this.getFormWrap=function(){for(var e=document.getElementsByTagName("form"),a=0;a<e.length;++a){var n=e[a],t=n.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),a=0;a<t.length;++a){var i=t[a];if(e=i.getElementsByTagName("form"),e.length)return i}return null},"function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!n.length&&!t.length){var i=!1;for(var r in a){i=!0;break}if(!i)return}if(qTranslateConfig.LSB&&qTranslateConfig.enabled_languages.length>1){var s=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var o=0;o<qTranslateConfig.page_config.anchors.length;++o){var l=qTranslateConfig.page_config.anchors[o],g=document.getElementById(l);g&&s.push(g)}if(!s.length){var g=e.langSwitchWrapAnchor;g||(g=this.getWrapForm()),g||(g=this.getWrapForm()),g&&s.push(g)}for(var o=0;o<s.length;++o){var l=s[o],d=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});l.parentNode.insertBefore(d,l);{new qtranxj_LanguageSwitch(d)}}this.addTabSwitchListener(onTabSwitch),e.onTabSwitch&&this.addTabSwitchListener(e.onTabSwitch)}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});