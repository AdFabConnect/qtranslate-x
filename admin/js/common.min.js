function qtranxj_get_cookie(e){for(var n=document.cookie.split(";"),a=0;a<n.length;++a){var t=n[a],i=t.split("=");if(i[0].trim()==e&&!(n.length<2))return i[1].trim()}return""}function qtranxj_ce(e,n,a,t){var i=document.createElement(e);if(n)for(prop in n)i[prop]=n[prop];return a&&(t&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)),i}function qtranxj_LanguageSwitch(e){function n(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==e.lang){if(qTranslateConfig.activeLanguage)for(var n=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<n.length;++a)n[a].classList.remove(qTranslateConfig.lsb_style_active_class);qTranslateConfig.activeLanguage=e.lang;for(var n=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<n.length;++a)n[a].classList.add(qTranslateConfig.lsb_style_active_class);for(var t=qTranslateConfig.onTabSwitchFunctions,a=0;a<t.length;++a)t[a].call(this)}}var a=qTranslateConfig.enabled_languages,t=qTranslateConfig.language_name;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var i=0;i<a.length;++i){var r=qTranslateConfig.flag_location,s=a[i],o=qtranxj_ce("li",{lang:s,className:"qtranxs-lang-switch",onclick:n},e);qtranxj_ce("img",{src:r+qTranslateConfig.flag[s]},o),qtranxj_ce("span",{innerHTML:t[s]},o),qTranslateConfig.activeLanguage==s&&o.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[s]||(qTranslateConfig.tabSwitches[s]=[]),qTranslateConfig.tabSwitches[s].push(o)}}qtranxj_get_split_blocks=function(e){var n=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return e.xsplit(n)},qtranxj_split=function(e){var n=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(n)},qtranxj_split_blocks=function(e){for(var n=new Object,a=0;a<qTranslateConfig.enabled_languages.length;++a){var t=qTranslateConfig.enabled_languages[a];n[t]=""}if(!e||!e.length)return n;if(1==e.length){for(var i=e[0],r=0;r<qTranslateConfig.enabled_languages.length;++r){var t=qTranslateConfig.enabled_languages[r];n[t]+=i}return n}for(var s,o=/<!--:([a-z]{2})-->/gi,l=/\[:([a-z]{2})\]/gi,t=!1,a=0;a<e.length;++a){var i=e[a];if(i.length)if(s=o.exec(i),o.lastIndex=0,null==s)if(s=l.exec(i),l.lastIndex=0,null==s)if("<!--:-->"!=i&&"[:]"!=i)if(t)n[t]+=i,t=!1;else for(var g in n)n[g]+=i;else t=!1;else t=s[1];else t=s[1]}return n},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var n,a=0,t=[];null!=(n=e.exec(this));)t.push(this.slice(a,n.index)),n.length>1&&t.push(n[1]),a=e.lastIndex;return a<this.length&&t.push(this.slice(a)),a==this.length&&t.push(""),t};var qTranslateX=function(e){this.ge=function(e){return document.getElementById(e)},isLanguageEnabled=function(e){for(var n=0;n<qTranslateConfig.enabled_languages.length;++n)if(qTranslateConfig.enabled_languages[n]==e)return!0;return!1},qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var n={};updateFusedValueH=function(e,a){var t=n[e],i=a.trim();t.fields[t.lang].value=i},addContentHook=function(e,a,t){if(!e)return!1;if(!e.name)return!1;switch(e.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(e.id||(e.id=e.tagName,a.id&&(e.id+=a.id),e.name&&(e.id+=e.name)),n[e.id])return!0;var i=n[e.id]={};i.name=e.name,i.contentField=e,i.lang=qTranslateConfig.activeLanguage;var r=qtranxj_split(e.value);e.value=r[i.lang];var s,o=i.name.indexOf("[");s=0>o?"qtranslate-fields["+i.name+"]":"qtranslate-fields["+i.name.substring(0,o)+"]"+i.name.substring(o),i.fields={};for(var l in r){var g=r[l],d=qtranxj_ce("input",{name:s+"["+l+"]",type:"hidden",className:"hidden",value:g});i.fields[l]=d,e.parentNode.insertBefore(d,e)}return t?"["!=t&&(i.sepfield=qtranxj_ce("input",{name:"qtranslate-fields["+e.name+"][sep]",type:"hidden",className:"hidden",value:t}),e.parentNode.insertBefore(i.sepfield,e)):t="[",i.separator=t,e.className+=" qtranxs-translatable",i},this.addContentHookC=function(e,n){return addContentHook(e,n,"<")},this.addContentHookB=function(e,n){return addContentHook(e,n,"[")},this.addContentHookById=function(e,n,a){return addContentHook(this.ge(e),n,a)},this.addContentHookByIdName=function(e,n){var a;return(0==e.indexOf("<")||0==e.indexOf("["))&&(a=e.substring(0,1),e=e.substring(1)),this.addContentHookById(e,n,a)},this.addContentHookByIdC=function(e,n){return this.addContentHookById(e,n,"<")},this.addContentHookByIdB=function(e,n){return this.addContentHookById(e,n,"[")},this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!n[e.id])return!1;var a=n[e.id];a.sepfield&&jQuery(a.sepfield).remove();for(var t in a.fields)jQuery(a.fields[t]).remove();return jQuery(e).removeClass("qtranxs-translatable"),delete n[e.id],!0};var a=[];addDisplayHookNode=function(e){if(!e.nodeValue)return 0;var n=qtranxj_get_split_blocks(e.nodeValue);if(!n||!n.length||1==n.length)return 0;var t={};return t.nd=e,t.contents=qtranxj_split_blocks(n),e.nodeValue=t.contents[qTranslateConfig.activeLanguage],a.push(t),1};var t=[];if(addDisplayHookAttr=function(e){if(!e.value)return 0;var n=qtranxj_get_split_blocks(e.value);if(!n||!n.length||1==n.length)return 0;var a={};return a.nd=e,a.contents=qtranxj_split_blocks(n),e.value=a.contents[qTranslateConfig.activeLanguage],t.push(a),1},addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return addDisplayHookAttr(e);default:return 0}}var n=0;if(e.childNodes&&e.childNodes.length)for(var a=0;a<e.childNodes.length;++a){var t=e.childNodes[a];switch(t.nodeType){case 1:n+=addDisplayHook(t);break;case 2:case 3:n+=addDisplayHookNode(t)}}return n},this.addDisplayHookById=function(e){return addDisplayHook(this.ge(e))},setLangCookie=function(e){document.cookie="qtrans_edit_language="+e},updateTinyMCE=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})},onTabSwitch=function(){setLangCookie(this.lang);for(var e=0;e<a.length;++e){var i=a[e];i.nd.nodeValue=i.contents[this.lang]}for(var e=0;e<t.length;++e){var i=t[e];i.nd.value=i.contents[this.lang]}for(var r in n){var i=n[r],s=i.mce&&!i.mce.hidden;s&&i.mce.save({format:"html"}),i.fields[i.lang].value=i.contentField.value,i.lang=this.lang;var o=i.fields[i.lang].value;i.contentField.placeholder&&""!=o&&(i.contentField.placeholder=""),i.contentField.value=o,s&&updateTinyMCE(i)}},qTranslateConfig.qtx=this,onTabSwitchCustom=function(){e.onTabSwitch(this.lang,qTranslateConfig.qtx)},addDisplayHooks=function(e){for(var n=0;n<e.length;++n){var a=e[n];addDisplayHook(a)}},this.addDisplayHooksByClass=function(e,n){var a=n.getElementsByClassName(e);addDisplayHooks(a)},this.addDisplayHooksByTagInClass=function(e,n,a){for(var t=a.getElementsByClassName(e),i=0;i<t.length;++i){var r=t[i],s=r.getElementsByTagName(n);addDisplayHooks(s)}},addContentFieldHooks=function(e,n,a){for(var t=0;t<e.length;++t){var i=e[t];addContentHook(i,n,a)}},addContentHooksByClassName=function(e,n,a,t){a||(a=n);var i=a.getElementsByClassName(e);addContentFieldHooks(i,n,t)},this.addContentHooksByClass=function(e,n,a){var t;(0==e.indexOf("<")||0==e.indexOf("["))&&(t=e.substring(0,1),e=e.substring(1)),addContentHooksByClassName(e,n,a,t)},this.addCustomContentHooks=function(e){for(var n=0;n<qTranslateConfig.custom_fields.length;++n){var a=qTranslateConfig.custom_fields[n];this.addContentHookByIdName(a,e)}for(var n=0;n<qTranslateConfig.custom_field_classes.length;++n){var a=qTranslateConfig.custom_field_classes[n];this.addContentHooksByClass(a,e)}},this.addPageHooks=function(e){for(var n=0;n<e.length;++n){var a,t=e[n];a=t.form?document.getElementById(t.form.id):this.getWrapForm();for(var i=0;i<t.fields.length;++i){var r=t.fields[i],s=[];if(r.container_id){var o=document.getElementById(r.container_id);o&&s.push(o)}else r.container_class?s=document.getElementsByClassName(r.container_class):a&&s.push(a);var l=r.encode;switch(l){case"display":if(r.id)addDisplayHook(document.getElementById(r.id));else if(r.class)for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByClassName(r.class),c=0;c<d.length;++c){var f=d[c];r.tag&&r.tag!=f.tagName||addDisplayHook(f)}else{if(!r.tag)continue;for(var g=0;g<s.length;++g){var o=s[g],u=o.getElementsByTagName(r.tag);addDisplayHooks(u)}}break;case"[":case"<":case"byline":default:if(!a)continue;if(r.id)this.addContentHookById(r.id,a,l);else if(r.class)for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByClassName(r.class),c=0;c<d.length;++c){var f=d[c];r.tag&&r.tag!=f.tagName||(!r.name||f.name&&r.name==f.name)&&addContentHook(f,a,l)}else{if(!r.tag)continue;for(var g=0;g<s.length;++g)for(var o=s[g],d=o.getElementsByTagName(r.tag),c=0;c<d.length;++c){var f=d[c];(!r.name||f.name&&r.name==f.name)&&addContentHook(f,a,l)}}}}}},this.addContentHooksTinyMCE=function(){function e(e){var a=e.id;if(a){var t=n[a];if(t&&!t.mce){t.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var r=e.getContent({format:"html"}).replace(/\s+/g,""),s=t.contentField.value.replace(/\s+/g,"");i=r!=s}return i&&updateTinyMCE(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var a in n){var t=n[a];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[a]){if(t.mceInit=tinyMCEPreInit.mceInit[a],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+a+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[a].init_instance_callback=function(n){e(n)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var n=0;n<tinyMCE.editors.length;++n){var a=tinyMCE.editors[n];e(a)}},window.addEventListener("load",loadTinyMceHooks)},this.getWrapForm=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){var a=e[n],t=a.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var n=0;n<t.length;++n){var i=t[n];if(e=i.getElementsByClassName("wrap"),e.length)return i}return null},this.getFormWrap=function(){for(var e=document.getElementsByTagName("form"),n=0;n<e.length;++n){var a=e[n],t=a.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),n=0;n<t.length;++n){var i=t[n];if(e=i.getElementsByTagName("form"),e.length)return i}return null},"function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!a.length&&!t.length){var i=!1;for(var r in n){i=!0;break}if(!i)return}if(qTranslateConfig.enabled_languages.length>1){var s=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var o=0;o<qTranslateConfig.page_config.anchors.length;++o){var l=qTranslateConfig.page_config.anchors[o],g=document.getElementById(l);g&&s.push(g)}if(!s.length){var g=e.langSwitchWrapAnchor;g||(g=this.getWrapForm()),g||(g=this.getWrapForm()),g&&s.push(g)}for(var o=0;o<s.length;++o){var l=s[o],d=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});l.parentNode.insertBefore(d,l);{new qtranxj_LanguageSwitch(d)}}qTranslateConfig.onTabSwitchFunctions=[],qTranslateConfig.onTabSwitchFunctions.push(onTabSwitch),e.onTabSwitch&&qTranslateConfig.onTabSwitchFunctions.push(onTabSwitchCustom)}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});