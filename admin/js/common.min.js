function qtranxj_get_cookie(n){for(var a=document.cookie.split(";"),e=0;e<a.length;++e){var t=a[e],i=t.split("=");if(i[0].trim()==n&&!(a.length<2))return i[1].trim()}return""}function qtranxj_ce(n,a,e,t){var i=document.createElement(n);if(a)for(prop in a)i[prop]=a[prop];return e&&(t&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),i}function qtranxj_LanguageSwitch(n){function a(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==n.lang){if(qTranslateConfig.activeLanguage){for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],e=0;e<a.length;++e)a[e].classList.remove(qTranslateConfig.lsb_style_active_class);for(var t=qTranslateConfig.onTabSwitchFunctionsSave,e=0;e<t.length;++e)t[e].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n.lang)}var i=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=n.lang;for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],e=0;e<a.length;++e)a[e].classList.add(qTranslateConfig.lsb_style_active_class);for(var o=qTranslateConfig.onTabSwitchFunctions,e=0;e<o.length;++e)o[e].call(qTranslateConfig.qtx,n.lang,i);for(var r=qTranslateConfig.onTabSwitchFunctionsLoad,e=0;e<r.length;++e)r[e].call(qTranslateConfig.qtx,n.lang,i)}}var e=qTranslateConfig.language_config;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var t in e){var i=e[t],o=qTranslateConfig.flag_location,r=qtranxj_ce("li",{lang:t,className:"qtranxs-lang-switch",onclick:a},n);qtranxj_ce("img",{src:o+i.flag},r),qtranxj_ce("span",{innerHTML:i.name},r),qTranslateConfig.activeLanguage==t&&r.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[t]||(qTranslateConfig.tabSwitches[t]=[]),qTranslateConfig.tabSwitches[t].push(r)}}qtranxj_get_split_blocks=function(n){var a=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return n.xsplit(a)},qtranxj_split=function(n){var a=qtranxj_get_split_blocks(n);return qtranxj_split_blocks(a)},qtranxj_split_blocks=function(n){var a=new Object;for(var e in qTranslateConfig.language_config)a[e]="";if(!n||!n.length)return a;if(1==n.length){var t=n[0];for(var e in qTranslateConfig.language_config)a[e]+=t;return a}for(var i,o=/<!--:([a-z]{2})-->/gi,r=/\[:([a-z]{2})\]/gi,e=!1,s=0;s<n.length;++s){var t=n[s];if(t.length)if(i=o.exec(t),o.lastIndex=0,null==i)if(i=r.exec(t),r.lastIndex=0,null==i)if("<!--:-->"!=t&&"[:]"!=t)if(e)a[e]+=t,e=!1;else for(var l in a)a[l]+=t;else e=!1;else e=i[1];else e=i[1]}return a},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var a,e=0,t=[];null!=(a=n.exec(this));)t.push(this.slice(e,a.index)),a.length>1&&t.push(a[1]),e=n.lastIndex;return e<this.length&&t.push(this.slice(e)),e==this.length&&t.push(""),t};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(n){return!!qTranslateConfig.language_config[n]},setLangCookie=function(n){document.cookie="qtrans_edit_language="+n},qTranslateConfig.activeLanguage,qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?setLangCookie(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage},this.getLanguages=function(){return qTranslateConfig.language_config};var a={},e=0;updateFusedValueH=function(n,e){var t=a[n],i=e.trim();t.fields[t.lang].value=i},addContentHook=function(n,t,i){if(!n)return!1;if(!n.name)return!1;switch(n.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(n.id||(n.id=n.tagName,t.id&&(n.id+=t.id),n.id+=n.name,n.name>2&&n.name.lastIndexOf("[]")==n.name.length-2&&(n.id+=++e)),a[n.id])return!0;var o=a[n.id]={};o.name=n.name,o.contentField=n,o.lang=qTranslateConfig.activeLanguage;var r=qtranxj_split(n.value);n.value=r[o.lang];var s,l,g=o.name.indexOf("[");if(0>g)s="qtranslate-fields["+o.name+"]";else if(s="qtranslate-fields["+o.name.substring(0,g)+"]",o.name.lastIndexOf("[]")<0)s+=o.name.substring(g);else{var c=o.name.length-2;c>g&&(s+=o.name.substring(g,c)),l="[]"}o.fields={};for(var f in r){var d=r[f],u=s+"["+f+"]";l&&(u+=l);var h=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:d});o.fields[f]=h,n.parentNode.insertBefore(h,n)}return i||(i="["),o.sepfield=qtranxj_ce("input",{name:s+"[qtranslate-separator]",type:"hidden",className:"hidden",value:i}),n.parentNode.insertBefore(o.sepfield,n),o.separator=i,n.className+=" qtranxs-translatable",o},this.addContentHookC=function(n,a){return addContentHook(n,a,"[")},this.addContentHookB=function(n,a){return addContentHook(n,a,"[")},this.addContentHookById=function(n,a,e){return addContentHook(this.ge(n),a,e)},this.addContentHookByIdName=function(n,a){var e;switch(n[0]){case"<":case"[":e=n.substring(0,1),n=n.substring(1)}return this.addContentHookById(n,a,e)},this.addContentHookByIdC=function(n,a){return this.addContentHookById(n,a,"[")},this.addContentHookByIdB=function(n,a){return this.addContentHookById(n,a,"[")},this.removeContentHook=function(n){if(!n)return!1;if(!n.id)return!1;if(!a[n.id])return!1;var e=a[n.id];e.sepfield&&jQuery(e.sepfield).remove();for(var t in e.fields)jQuery(e.fields[t]).remove();return jQuery(n).removeClass("qtranxs-translatable"),delete a[n.id],!0};var t=[];addDisplayHookNode=function(n){if(!n.nodeValue)return 0;var a=qtranxj_get_split_blocks(n.nodeValue);if(!a||!a.length||1==a.length)return 0;var e={};return e.nd=n,e.contents=qtranxj_split_blocks(a),n.nodeValue=e.contents[qTranslateConfig.activeLanguage],t.push(e),1};var i=[];if(addDisplayHookAttr=function(n){if(!n.value)return 0;var a=qtranxj_get_split_blocks(n.value);if(!a||!a.length||1==a.length)return 0;var e={};return e.nd=n,e.contents=qtranxj_split_blocks(a),n.value=e.contents[qTranslateConfig.activeLanguage],i.push(e),1},addDisplayHook=function(n){if(!n||!n.tagName)return 0;switch(n.tagName){case"TEXTAREA":return 0;case"INPUT":switch(n.type){case"submit":if(n.value)return addDisplayHookAttr(n);default:return 0}}var a=0;if(n.childNodes&&n.childNodes.length)for(var e=0;e<n.childNodes.length;++e){var t=n.childNodes[e];switch(t.nodeType){case 1:a+=addDisplayHook(t);break;case 2:case 3:a+=addDisplayHookNode(t)}}return a},this.addDisplayHookById=function(n){return addDisplayHook(this.ge(n))},updateTinyMCE=function(n){text=n.contentField.value,n.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),n.mce.setContent(text,{format:"html"})},onTabSwitch=function(n){setLangCookie(n);for(var e=0;e<t.length;++e){var o=t[e];o.nd.nodeValue=o.contents[n]}for(var e=0;e<i.length;++e){var o=i[e];o.nd.value=o.contents[n]}for(var r in a){var o=a[r],s=o.mce&&!o.mce.hidden;s&&o.mce.save({format:"html"}),o.fields[o.lang].value=o.contentField.value,o.lang=n;var l=o.fields[o.lang].value;o.contentField.placeholder&&""!=l&&(o.contentField.placeholder=""),o.contentField.value=l,s&&updateTinyMCE(o)}},qTranslateConfig.qtx=this,addDisplayHooks=function(n){for(var a=0;a<n.length;++a){var e=n[a];addDisplayHook(e)}},this.addDisplayHooksByClass=function(n,a){var e=a.getElementsByClassName(n);addDisplayHooks(e)},this.addDisplayHooksByTagInClass=function(n,a,e){for(var t=e.getElementsByClassName(n),i=0;i<t.length;++i){var o=t[i],r=o.getElementsByTagName(a);addDisplayHooks(r)}},addContentFieldHooks=function(n,a,e){for(var t=0;t<n.length;++t){var i=n[t];addContentHook(i,a,e)}},addContentHooksByClassName=function(n,a,e,t){e||(e=a);var i=e.getElementsByClassName(n);addContentFieldHooks(i,a,t)},this.addContentHooksByClass=function(n,a,e){var t;(0==n.indexOf("<")||0==n.indexOf("["))&&(t=n.substring(0,1),n=n.substring(1)),addContentHooksByClassName(n,a,e,t)},this.addCustomContentHooks=function(n){for(var a=0;a<qTranslateConfig.custom_fields.length;++a){var e=qTranslateConfig.custom_fields[a];this.addContentHookByIdName(e,n)}for(var a=0;a<qTranslateConfig.custom_field_classes.length;++a){var e=qTranslateConfig.custom_field_classes[a];this.addContentHooksByClass(e,n)}},this.addPageHooks=function(n){for(var a=0;a<n.length;++a){var e,t=n[a];e=t.form?document.getElementById(t.form.id):this.getWrapForm();for(var i=0;i<t.fields.length;++i){var o=t.fields[i],r=[];if(o.container_id){var s=document.getElementById(o.container_id);s&&r.push(s)}else o.container_class?r=document.getElementsByClassName(o.container_class):e&&r.push(e);var l=o.encode;switch(l){case"display":if(o.id)addDisplayHook(document.getElementById(o.id));else if(o.class)for(var g=0;g<r.length;++g)for(var s=r[g],c=s.getElementsByClassName(o.class),f=0;f<c.length;++f){var d=c[f];o.tag&&o.tag!=d.tagName||addDisplayHook(d)}else{if(!o.tag)continue;for(var g=0;g<r.length;++g){var s=r[g],u=s.getElementsByTagName(o.tag);addDisplayHooks(u)}}break;case"[":case"<":case"byline":default:if(!e)continue;if(o.id)this.addContentHookById(o.id,e,l);else if(o.class)for(var g=0;g<r.length;++g)for(var s=r[g],c=s.getElementsByClassName(o.class),f=0;f<c.length;++f){var d=c[f];o.tag&&o.tag!=d.tagName||(!o.name||d.name&&o.name==d.name)&&addContentHook(d,e,l)}else{if(!o.tag)continue;for(var g=0;g<r.length;++g)for(var s=r[g],c=s.getElementsByTagName(o.tag),f=0;f<c.length;++f){var d=c[f];(!o.name||d.name&&o.name==d.name)&&addContentHook(d,e,l)}}}}}},this.addContentHooksTinyMCE=function(){function n(n){var e=n.id;if(e){var t=a[e];if(t&&!t.mce){t.mce=n,n.getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var o=n.getContent({format:"html"}).replace(/\s+/g,""),r=t.contentField.value.replace(/\s+/g,"");i=o!=r}return i&&updateTinyMCE(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var e in a){var t=a[e];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[e]){if(t.mceInit=tinyMCEPreInit.mceInit[e],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+e+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(a){n(a)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var a=0;a<tinyMCE.editors.length;++a){var e=tinyMCE.editors[a];n(e)}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(n){qTranslateConfig.onTabSwitchFunctions.push(n)},this.addLanguageSwitchBeforeListener=function(n){qTranslateConfig.onTabSwitchFunctionsSave.push(n)},this.addLanguageSwitchAfterListener=function(n){qTranslateConfig.onTabSwitchFunctionsLoad.push(n)},this.enableLanguageSwitchingButtons=function(n){var a=n?"block":"none";for(var e in qTranslateConfig.tabSwitches){for(var t=qTranslateConfig.tabSwitches[e],i=0;i<t.length;++i){var o=(t[i],t[i].parentElement);o.style.display=a;break}break}},this.getWrapForm=function(){for(var n=document.getElementsByClassName("wrap"),a=0;a<n.length;++a){var e=n[a],t=e.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var a=0;a<t.length;++a){var i=t[a];if(n=i.getElementsByClassName("wrap"),n.length)return i}return null},this.getFormWrap=function(){for(var n=document.getElementsByTagName("form"),a=0;a<n.length;++a){var e=n[a],t=e.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),a=0;a<t.length;++a){var i=t[a];if(n=i.getElementsByTagName("form"),n.length)return i}return null},"function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!t.length&&!i.length){var o=!1;for(var r in a){o=!0;break}if(!o)return}if(qTranslateConfig.LSB){var s=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var l=0;l<qTranslateConfig.page_config.anchors.length;++l){var g=qTranslateConfig.page_config.anchors[l],c=document.getElementById(g);c&&s.push(c)}if(!s.length){var c=n.langSwitchWrapAnchor;c||(c=this.getWrapForm()),c||(c=this.getWrapForm()),c&&s.push(c)}for(var l=0;l<s.length;++l){var g=s[l],f=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});g.parentNode.insertBefore(f,g);{new qtranxj_LanguageSwitch(f)}}this.addLanguageSwitchListener(onTabSwitch),n.onTabSwitch&&this.addLanguageSwitchListener(n.onTabSwitch)}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});