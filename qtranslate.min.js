function qtranxj_get_cookie(e){for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var t=a[n],i=t.split("=");if(i[0].trim()==e&&!(a.length<2))return i[1].trim()}return""}function qtranxj_isArray(e){return e.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(e,a,n,t){var i=document.createElement(e);if(a)for(prop in a)i[prop]=a[prop];return n&&(t&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}function LanguageSwitch(e,a){function n(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(r!==e.lang){r&&l[r].classList.remove("active"),r=e.lang,e.classList.add("active");for(var a=0;a<o.length;a++)o[a].call(this)}}var t=qTranslateConfig.enabled_languages,i=qTranslateConfig.language_name,r=a,l={},o=[];location.pathname.indexOf();for(var g=0;g<t.length;g++){var s=qTranslateConfig.WP_CONTENT_URL+qTranslateConfig.flag_location,u=t[g],c=qtranxj_ce("li",{lang:u,className:"qtranxs-lang-switch",onclick:n},e);qtranxj_ce("img",{src:s+qTranslateConfig.flag[u]},c),qtranxj_ce("span",{innerHTML:i[u]},c),l[u]=c,r==u&&c.classList.add("active")}this.getActiveLanguage=function(){return r},this.onSwitch=function(e){"function"==typeof e&&o.push(e)}}qtranxj_split=function(e){for(var a=new Object,n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n];a[t]=""}var i,r,l=/(<!--.*?-->)/gi,o=e.xsplit(l);if(qtranxj_isArray(o))i=/<!--:([a-z]{2})-->/gi,r=/<!--:-->/gi;else{var g=/(\[:[a-z]{2}\])/gi;if(o=e.xsplit(g),!qtranxj_isArray(o))return a;i=/\[:([a-z]{2})\]/gi}for(var s=null,u=!1,n=0;n<o.length;n++){var c=o[n];if(null!=(s=i.exec(c)))u=s[1];else if(r&&r.test(c))u=!1;else if(u)a[u]+=c,u=!1;else for(var f=0;f<qTranslateConfig.enabled_languages.length;f++){var t=qTranslateConfig.enabled_languages[f];a[t]+=c}}for(var d=/(<!--more-->|<!--nextpage-->)+$/gi,n=0;n<a.length;n++)a[n]=a[n].replace(d,"");return a},qtranxj_split_c=function(e){return qtranxj_split(e)},qtranxj_join_c=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],i=e[t];i&&""!=i&&(a+="<!--:"+t+"-->",a+=i,a+="<!--:-->")}return a},qtranxj_split_b=function(e){return qtranxj_split(e)},qtranxj_join_b=function(e){for(var a="",n=0;n<qTranslateConfig.enabled_languages.length;n++){var t=qTranslateConfig.enabled_languages[n],i=e[t];i&&""!=i&&(a+="[:"+t+"]",a+=i)}return a},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var a,n=0,t=[];null!=(a=e.exec(this));)t.push(this.slice(n,a.index)),a.length>1&&t.push(a[1]),n=e.lastIndex;return n<this.length&&t.push(this.slice(n)),n==this.length&&t.push(""),t};var qTranslateX=function(){function e(e){return document.getElementById(e)}function a(e,a,n,t){var i=/(<!--more-->|<!--nextpage-->)+$/gi;n[t]=a.replace(i,""),e.value=qtranxj_join_c(n)}function n(e,n){var t=g[e];a(t.mlContentField,n,t.contents,languageSwitch.getActiveLanguage())}function t(e,a){if(e){var t=g[e.id]={};t.contentField=e,t.contents=qtranxj_split_c(e.value),t.mlContentField=qtranxj_ce(e.tagName,{name:e.name,className:"hidden",value:e.value},a,!0),e.name+="_edit",e.value=t.contents[o],e.onblur=function(){n(this.id,this.value)}}}function i(e,a,n,t){n[t]=a,e.value=qtranxj_join_b(n)}function r(){var a,n,t=!!e("tag-name");t?(a="tag-",n="addtag"):(a="",n="edittag");var i=e(a+"name"),r=e(n);if(!r||!i)return!1;var l=qtranxj_get_cookie("qtrans_admin_language");l||(l=qTranslateConfig.default_language),build_translator=function(e,a){var n={};for(var t in qTranslateConfig.term_name){var i=qTranslateConfig.term_name[t],r=i[e],l=i[a];if(!r||!l){var o=i[qTranslateConfig.default_language];if(!o)continue;r||(r=o+"("+qTranslateConfig.default_language+")"),l||(l=o+"("+qTranslateConfig.default_language+")")}n[r]=l}return n};var g=e("the-list");hideQuickEdit=function(){if(g)for(var e=g.getElementsByTagName("TR"),a=0;a<e.length;a++)for(var n=e[a],t=n.getElementsByTagName("TD")[0],i=t.getElementsByClassName("inline"),r=0;r<i.length;r++){var l=i[r];l.style.display="none"}},hideQuickEdit(),updateNames=function(e,a){if(g)for(var n=g.getElementsByTagName("TR"),t=0;t<n.length;t++){for(var i,r=n[t],o=r.getElementsByTagName("TD")[0],s=o.getElementsByTagName("DIV"),u=0;u<s.length;u++){var c=s[u];if("name"===c.className){i=c.innerHTML;break}}if(l!=qTranslateConfig.default_language){var f=build_translator(l,qTranslateConfig.default_language);i=f[i]}for(var d=qTranslateConfig.term_name[i]||{},h=d[e]||"",v=d[a]||"",m=o.getElementsByClassName("row-title"),_=0;_<m.length;_++){var c=m[_];h?c.innerHTML=c.innerHTML.replace(h,v):c.innerHTML+=v}}};var s=document.getElementsByClassName("tagcloud")[0];updateTagCloud=function(e,a){if(s){var n=s.getElementsByTagName("A");if(n.length)for(var t=build_translator(e,a),i=0;i<n.length;i++){var r=n[i],l=r.innerHTML,o=t[l];o&&(r.innerHTML=o)}}},updateNamesAndTagCloud=function(e,a){updateNames(e,a),updateTagCloud(e,a)},l!==o&&updateNamesAndTagCloud(l,o);var u=qtranxj_ce("input",{name:i.name,className:"hidden",value:i.value},r,!0);i.name="";var c=qTranslateConfig.term_name[i.value]||{};o!==qTranslateConfig.default_language&&(i.value=c[o]||""),editinline_activated=function(){return!0};for(var f=document.getElementsByClassName("editinline"),d=0;d<f.length;d++){var h=f[d];"A"===h.tagName&&h.addEventListener("click",editinline_activated)}onTabSwitch=function(){o!==this.lang&&(i.value=c[this.lang]||"",updateNamesAndTagCloud(o,this.lang),o=this.lang)};for(var v=qTranslateConfig.enabled_languages,m={},d=0;d<v.length;d++){var _=v[d];m[_]=qtranxj_ce("input",{name:"qtranx_term_"+_,className:"hidden",value:name[_]||""},r,!0)}return i.onblur=function(){var e=languageSwitch.getActiveLanguage();m[e].value=this.value,c[e]=this.value,e===qTranslateConfig.default_language&&(u.value=this.value)},!0}function l(){function a(e,a){switch(qTranslateConfig.url_mode.toString()){case"1":e.search?e.search+="&lang="+a:e.search="?lang="+a;break;case"2":var n=e.pathname.indexOf(qTranslateConfig.url_info.home);e.pathname=qTranslateConfig.url_info.home+a+e.pathname.substring(n+qTranslateConfig.url_info.home.length-1);break;case"3":e.host=a+"."+e.host}}function r(n){if(!p){var t=e("view-post-btn");if(!t||!t.children.length)return;if(p=t.children[0],"A"!=p.tagName)return;q=p.href,T=qtranxj_ce("a",{})}T.href=q,a(T,n),p.href=T.href;var i=e("preview-action");if(i&&i.children.length&&(i.children[0].href=T.href),1!=qTranslateConfig.url_mode){if(!C){var r=e("sample-permalink");r&&r.childNodes.length&&(C=r.childNodes[0],x=C.nodeValue)}C&&(T.href=x,a(T,n),C.nodeValue=T.href)}}function l(e){window.onbeforeunload=function(){};var a=e.id;if(a){var t=g[a];t.mce||(t.mce=e,e.getBody().addEventListener("blur",function(){n(e.id,e.getContent())}))}}var s=e("post"),u=e("title");if(!u)return!1;t(u,s);for(var c=s.getElementsByClassName("wp-editor-area"),f=0;f<c.length;++f){var d=c[f];t(d,s)}var h=e("attachment_caption");h&&t(h,s);var v,m,_=e("attachment_alt");_&&(v=qtranxj_split_b(_.value),m=qtranxj_ce(_.tagName,{name:_.name,className:"hidden",value:_.value},s,!0),_.name+="_edit",_.value=v[o],_.onblur=function(){i(m,this.value,v,languageSwitch.getActiveLanguage())});var p,q,T,C,x;return r(o),onTabSwitch=function(){for(var e in g){var a=g[e];a.contentField.value=a.contents[this.lang]}if(_&&(_.value=v[this.lang]),r(this.lang),window.tinyMCE)for(var n=0;n<tinyMCE.editors.length;++n){var t=tinyMCE.editors[n],a=g[t.id];a&&t.setContent(a.contentField.value)}},window.addEventListener("load",function(){if(window.tinyMCE){for(var e=0;e<tinyMCE.editors.length;++e){var a=tinyMCE.editors[e];l(a)}for(var n in g){var t=g[n];t.mce||"TEXTAREA"===t.contentField.tagName&&(tinyMCEPreInit.mceInit[n].init_instance_callback=function(e){l(e)})}}}),!0}var o=qtranxj_get_cookie("qtrans_edit_language");o||(o=qTranslateConfig.default_language);var g={};setLangCookie=function(){document.cookie="qtrans_edit_language="+this.lang};var s=location.pathname.match(/(\/wp-admin\/([^\/]*))$/);switch(s&&s[1]){case"/wp-admin/post.php":case"/wp-admin/post-new.php":if(!l())return;break;case"/wp-admin/edit-tags.php":if(!r())return;break;default:return}var u=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"}),c=document.getElementsByClassName("wrap")[0],f=c.getElementsByTagName("form")[0];f.parentNode.insertBefore(u,f),languageSwitch=new LanguageSwitch(u,o),languageSwitch.onSwitch(onTabSwitch),languageSwitch.onSwitch(setLangCookie)};new qTranslateX;